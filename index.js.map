{"version":3,"file":"index.js","sources":["../src/js/global-notification.js","../src/js/form-validation.js","../src/js/rating-modal.js","../src/js/favorites.js","../src/js/header.js","../src/js/exercise-modal.js","../src/js/exercises.js","../src/js/email-validation.js","../src/js/quote.js","../src/main.js"],"sourcesContent":["let notificationTimeout = null;\n\n/**\n * Shows a global notification message\n * @param {string} message - The message to display\n * @param {string} type - The type of notification ('success' or 'error')\n */\nexport function showGlobalNotification(message, type = 'success') {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification || !textElement) return;\n\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  textElement.textContent = message;\n  notification.classList.remove('global-notification--error');\n  if (type === 'error') {\n    notification.classList.add('global-notification--error');\n  } else if (type === 'warning') {\n    notification.classList.add('global-notification--warning');\n  }\n\n  notification.classList.add('global-notification--visible');\n\n  notificationTimeout = setTimeout(() => {\n    hideGlobalNotification();\n  }, 3000);\n}\n\nexport function hideGlobalNotification() {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification) return;\n\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  notification.classList.remove('global-notification--visible');\n\n  setTimeout(() => {\n    if (textElement) {\n      textElement.textContent = '';\n    }\n    notification.classList.remove('global-notification--error', 'global-notification--warning');\n  }, 300);\n}\n\nexport function initGlobalNotification() {\n  const closeBtn = document.getElementById('js-global-notification-close');\n\n  if (closeBtn) {\n    closeBtn.addEventListener('click', hideGlobalNotification);\n  }\n}\n","/**\n * Модуль утиліт для валідації форм\n * Надає повторно використовувані функції для перевірки полів форми та відображення помилок\n */\n\n/**\n * Показує повідомлення про помилку для поля форми\n * @param {HTMLElement} inputElement - Елемент input/textarea\n * @param {HTMLElement} errorElement - Елемент для відображення повідомлення про помилку\n * @param {string} message - Текст повідомлення про помилку\n */\nexport function showFieldError(inputElement, errorElement, message) {\n  if (inputElement) {\n    const errorClass = inputElement.classList.contains('rating-modal__textarea')\n      ? 'rating-modal__textarea--error'\n      : inputElement.classList.contains('rating-modal__input')\n        ? 'rating-modal__input--error'\n        : inputElement.classList.contains('footer__subscribe-form-input')\n          ? 'footer__subscribe-form-input--error'\n          : 'form-field--error';\n\n    inputElement.classList.add(errorClass);\n  }\n\n  if (errorElement) {\n    errorElement.textContent = message;\n    errorElement.classList.add('form-error--visible');\n  }\n}\n\n/**\n * Приховує повідомлення про помилку для поля форми\n * @param {HTMLElement} inputElement - Елемент input/textarea\n * @param {HTMLElement} errorElement - Елемент, що відображає повідомлення про помилку\n */\nexport function hideFieldError(inputElement, errorElement) {\n  if (inputElement) {\n    inputElement.classList.remove(\n      'rating-modal__input--error',\n      'rating-modal__textarea--error',\n      'footer__subscribe-form-input--error',\n      'form-field--error'\n    );\n  }\n\n  if (errorElement) {\n    errorElement.textContent = '';\n    errorElement.classList.remove('form-error--visible');\n  }\n}\n\n/**\n * Перевіряє коректність електронної адреси\n * @param {string} email - Електронна адреса для перевірки\n * @returns {boolean} true, якщо електронна адреса коректна, інакше false\n */\nexport function validateEmail(email) {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Перевіряє, що поле не є порожнім\n * @param {string} value - Значення для перевірки\n * @returns {boolean} true, якщо значення не порожнє, інакше false\n */\nexport function validateRequired(value) {\n  return value.trim().length > 0;\n}\n\n// Динамічний рік у футері\ndocument.getElementById('year').textContent = new Date().getFullYear();\n","import { showGlobalNotification } from './global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './form-validation.js';\n\nlet currentExerciseIdForRating = null;\n\n// Серверні повідомлення\nfunction showServerMessage(message, type = 'error') {\n  const messageElement = document.getElementById('js-rating-server-message');\n  const messageTextElement = document.getElementById(\n    'js-rating-server-message-text'\n  );\n  if (!messageElement || !messageTextElement) return;\n\n  messageTextElement.textContent = message;\n  messageElement.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n  messageElement.classList.add(`rating-modal__server-message--${type}`);\n  messageElement.classList.add('rating-modal__server-message--visible');\n}\n\nfunction hideServerMessage() {\n  const messageElement = document.getElementById('js-rating-server-message');\n  const messageTextElement = document.getElementById(\n    'js-rating-server-message-text'\n  );\n  if (!messageElement) return;\n\n  messageElement.classList.remove('rating-modal__server-message--visible');\n  if (messageTextElement) {\n    messageTextElement.textContent = '';\n  }\n  messageElement.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n}\n\n// Керування модальним вікном\nfunction closeRatingModal() {\n  const ratingModal = document.getElementById('js-rating-modal');\n  if (!ratingModal) return;\n\n  // 1. Закриваємо ТІЛЬКИ rating modal\n  ratingModal.classList.remove('rating-modal--open');\n\n  // 2. Показуємо назад exercise modal\n  const exerciseModal = document.getElementById('js-exercise-modal');\n  exerciseModal?.classList.remove('exercise-modal--hidden');\n\n  // 3. Scroll: exercise modal ще відкрита\n  document.body.style.overflow = 'hidden';\n\n  currentExerciseIdForRating = null;\n\n  // 4. Очистка стану форми\n  const emailInput = document.getElementById('js-rating-modal-email');\n  const emailError = document.getElementById('js-email-error');\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\n  const commentError = document.getElementById('js-comment-error');\n  const ratingError = document.getElementById('js-rating-error');\n\n  hideFieldError(emailInput, emailError);\n  hideFieldError(commentTextarea, commentError);\n  hideFieldError(null, ratingError);\n  hideServerMessage();\n}\n\nexport function openRatingModal(exerciseId) {\n  const modal = document.getElementById('js-rating-modal');\n  if (!modal) return;\n\n  modal.classList.add('rating-modal--open');\n  currentExerciseIdForRating = exerciseId;\n\n  // Отримання елементів форми\n  const form = document.getElementById('js-rating-modal-form');\n  const emailInput = document.getElementById('js-rating-modal-email');\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\n  const ratingValue = document.getElementById('js-rating-modal-value');\n  const stars = document.querySelectorAll('.rating-modal__star');\n\n  // Скидання форми\n  if (form) form.reset();\n  if (ratingValue) ratingValue.textContent = '0.0';\n\n  // Очищення помилок\n  const emailError = document.getElementById('js-email-error');\n  const commentError = document.getElementById('js-comment-error');\n  const ratingError = document.getElementById('js-rating-error');\n  hideFieldError(emailInput, emailError);\n  hideFieldError(commentTextarea, commentError);\n  hideFieldError(null, ratingError);\n  hideServerMessage();\n\n  // Скидання зірок рейтингу\n  stars.forEach(star => {\n    star.classList.remove('rating-modal__star--active');\n    const svg = star.querySelector('svg');\n    if (svg) {\n      const path = svg.querySelector('path');\n      if (path) {\n        path.setAttribute('fill', 'none');\n        path.setAttribute('stroke', 'currentColor');\n      }\n    }\n  });\n\n  // Відкриття модального вікна\n  modal.classList.add('rating-modal--open');\n  document.body.style.overflow = 'hidden';\n}\n\nexport { closeRatingModal };\n\n// Обробник закриття модального вікна\nexport function initRatingModal() {\n  const ratingModalCloseBtn = document.getElementById('js-rating-modal-close');\n  const ratingModal = document.getElementById('js-rating-modal');\n  const ratingModalOverlay = ratingModal?.querySelector(\n    '.rating-modal__overlay'\n  );\n\n  if (ratingModalCloseBtn) {\n    ratingModalCloseBtn.addEventListener('click', closeRatingModal);\n  }\n\n  if (ratingModalOverlay) {\n    ratingModalOverlay.addEventListener('click', closeRatingModal);\n  }\n\n  // Обробник закриття серверного повідомлення\n  const serverMessageCloseBtn = document.getElementById(\n    'js-rating-server-message-close'\n  );\n  if (serverMessageCloseBtn) {\n    serverMessageCloseBtn.addEventListener('click', hideServerMessage);\n  }\n\n  // Система рейтингу зірками\n  const ratingStars = document.querySelectorAll('.rating-modal__star');\n  const ratingValue = document.getElementById('js-rating-modal-value');\n  let selectedRating = 0;\n\n  ratingStars.forEach((star, index) => {\n    star.addEventListener('click', () => {\n      selectedRating = index + 1;\n\n      if (ratingValue) {\n        ratingValue.textContent = selectedRating.toFixed(1);\n      }\n\n      ratingStars.forEach((s, i) => {\n        if (i < selectedRating) {\n          s.classList.add('rating-modal__star--active');\n          const svg = s.querySelector('svg');\n          if (svg) {\n            const path = svg.querySelector('path');\n            if (path) {\n              path.setAttribute('fill', '#EEA10C');\n              path.setAttribute('stroke', '#EEA10C');\n            }\n          }\n        } else {\n          s.classList.remove('rating-modal__star--active');\n          const svg = s.querySelector('svg');\n          if (svg) {\n            const path = svg.querySelector('path');\n            if (path) {\n              path.setAttribute('fill', 'none');\n              path.setAttribute('stroke', 'currentColor');\n            }\n          }\n        }\n      });\n    });\n\n    // Ефект hover\n    star.addEventListener('mouseenter', () => {\n      const hoverRating = index + 1;\n      ratingStars.forEach((s, i) => {\n        if (\n          i < hoverRating &&\n          !s.classList.contains('rating-modal__star--active')\n        ) {\n          s.style.color = 'rgba(255, 255, 255, 0.6)';\n        }\n      });\n    });\n\n    star.addEventListener('mouseleave', () => {\n      ratingStars.forEach((s, i) => {\n        if (!s.classList.contains('rating-modal__star--active')) {\n          s.style.color = 'rgba(255, 255, 255, 0.3)';\n        }\n      });\n    });\n  });\n\n  // обробник очищення помилок при введені\n  const emailInput = document.getElementById('js-rating-modal-email');\n  const emailError = document.getElementById('js-email-error');\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\n  const commentError = document.getElementById('js-comment-error');\n\n  if (emailInput && emailError) {\n    emailInput.addEventListener('input', () => {\n      hideFieldError(emailInput, emailError);\n    });\n  }\n\n  if (commentTextarea && commentError) {\n    commentTextarea.addEventListener('input', () => {\n      hideFieldError(commentTextarea, commentError);\n    });\n  }\n\n  ratingStars.forEach(star => {\n    star.addEventListener('click', () => {\n      const ratingError = document.getElementById('js-rating-error');\n      if (ratingError) {\n        hideFieldError(null, ratingError);\n      }\n    });\n  });\n\n  // Обробка відправки форми\n  const ratingForm = document.getElementById('js-rating-modal-form');\n  if (ratingForm) {\n    ratingForm.addEventListener('submit', e => {\n      e.preventDefault();\n\n      const ratingStars = document.querySelectorAll('.rating-modal__star');\n      const ratingValue = document.getElementById('js-rating-modal-value');\n      const emailInput = document.getElementById('js-rating-modal-email');\n      const commentTextarea = document.getElementById(\n        'js-rating-modal-comment'\n      );\n      const emailError = document.getElementById('js-email-error');\n      const commentError = document.getElementById('js-comment-error');\n      const ratingError = document.getElementById('js-rating-error');\n\n      let selectedRating = 0;\n      let hasErrors = false;\n\n      // Визначення обраного рейтингу\n      ratingStars.forEach((star, index) => {\n        if (star.classList.contains('rating-modal__star--active')) {\n          selectedRating = Math.max(selectedRating, index + 1);\n        }\n      });\n\n      // Валідація рейтингу\n      if (selectedRating === 0) {\n        showFieldError(null, ratingError, 'Please select a rating');\n        hasErrors = true;\n      } else {\n        hideFieldError(null, ratingError);\n      }\n\n      // Валідація email\n      const email = emailInput?.value.trim() || '';\n      const review = commentTextarea?.value.trim() || '';\n\n      if (!email) {\n        showFieldError(emailInput, emailError, 'Please enter your email');\n        hasErrors = true;\n      } else if (!validateEmail(email)) {\n        showFieldError(\n          emailInput,\n          emailError,\n          'Please enter a valid email address'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(emailInput, emailError);\n      }\n\n      // валідація коментаря\n      if (!review) {\n        showFieldError(\n          commentTextarea,\n          commentError,\n          'Please enter your comment'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(commentTextarea, commentError);\n      }\n\n      // Перевірка наявності помилок\n      if (hasErrors) {\n        return;\n      }\n\n      // Відправка рейтингу на сервер\n      if (currentExerciseIdForRating) {\n        hideServerMessage();\n\n        fetch(\n          `https://your-energy.b.goit.study/api/exercises/${currentExerciseIdForRating}/rating`,\n          {\n            method: 'PATCH',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              rate: selectedRating,\n              email,\n              review,\n            }),\n          }\n        )\n          .then(async response => {\n            const data = await response.json();\n\n            if (!response.ok) {\n              throw { message: data.message, data };\n            }\n\n            return data;\n          })\n          .then(data => {\n            closeRatingModal();\n            const exerciseName = data.name || 'the exercise';\n            showGlobalNotification(\n              `Thank you, your review for exercise ${exerciseName} has been submitted`,\n              'success'\n            );\n          })\n          .catch(error => {\n            const errorMessage =\n              error.message || 'Failed to submit rating. Please try again.';\n            showServerMessage(errorMessage, 'error');\n          });\n      }\n    });\n  }\n}\n","const FAVORITES_KEY = 'favorites';\n\n// Отримання даних\nexport function getFavorites() {\n  try {\n    const favorites = localStorage.getItem(FAVORITES_KEY);\n    return favorites ? JSON.parse(favorites) : [];\n  } catch (error) {\n    return [];\n  }\n}\n\n// Додавання та видалення\nexport function addToFavorites(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    if (!favorites.includes(exerciseId)) {\n      favorites.push(exerciseId);\n      localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n      return true;\n    }\n    return false;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport function removeFromFavorites(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    const filteredFavorites = favorites.filter(id => id !== exerciseId);\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(filteredFavorites));\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport function isFavorite(exerciseId) {\n  const favorites = getFavorites();\n  return favorites.includes(exerciseId);\n}\n\n// Перемикання стану\nexport function toggleFavorite(exerciseId) {\n  if (isFavorite(exerciseId)) {\n    removeFromFavorites(exerciseId);\n    return false;\n  } else {\n    addToFavorites(exerciseId);\n    return true;\n  }\n}\n","import { switchToHome, switchToFavorites } from './exercises.js';\n\nlet currentPage = 'home';\n\nlet mobileMenu = null;\nlet burgerButton = null;\nlet closeButton = null;\nlet overlay = null;\n\n// Перемикання сторінок\nexport function switchPage(page) {\n  if (currentPage === page) return;\n\n  currentPage = page;\n\n  // Оновлення активного стану для десктопної навігації\n  const navLinks = document.querySelectorAll('.header__nav-link');\n  navLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('header__nav-link--active');\n    } else {\n      link.classList.remove('header__nav-link--active');\n    }\n  });\n\n  // Оновлення для активного стану для мобільної навігації\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('mobile-menu__nav-link--active');\n    } else {\n      link.classList.remove('mobile-menu__nav-link--active');\n    }\n  });\n\n  // Завантаження контенту відповідної сторінки\n  if (page === 'home') {\n    switchToHome();\n  } else if (page === 'favorites') {\n    switchToFavorites();\n  }\n}\n\n// Мобільне меню\nfunction openMobileMenu() {\n  if (mobileMenu) {\n    mobileMenu.classList.add('is-open');\n    burgerButton.classList.add('is-hidden');\n    overlay.classList.add('active');\n    document.body.style.overflow = 'hidden';\n  }\n}\n\nfunction closeMobileMenu() {\n  if (mobileMenu) {\n    mobileMenu.classList.remove('is-open');\n    burgerButton.classList.remove('is-hidden');\n    overlay.classList.remove('active');\n    document.body.style.overflow = '';\n  }\n}\n\n// Ініціалізація\nexport function initHeader() {\n  const navLinks = document.querySelectorAll('.header__nav-link');\n\n  navLinks.forEach(link => {\n    link.addEventListener('click', e => {\n      e.preventDefault();\n      const page = link.getAttribute('data-page');\n      if (page) {\n        switchPage(page);\n      }\n    });\n  });\n\n  mobileMenu = document.querySelector('.mobile-menu');\n  burgerButton = document.querySelector('.header__burger');\n  closeButton = document.querySelector('.mobile-menu__close');\n  overlay = document.getElementById('overlay');\n\n  // Відкриття мобільного меню\n  if (burgerButton) {\n    burgerButton.addEventListener('click', openMobileMenu);\n  }\n\n  // Закриття мобільного меню\n  if (closeButton) {\n    closeButton.addEventListener('click', closeMobileMenu);\n  }\n\n  // Ініціалізація мобільної навігації\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    link.addEventListener('click', e => {\n      e.preventDefault();\n      const page = link.getAttribute('data-page');\n      if (page) {\n        switchPage(page);\n        closeMobileMenu();\n      }\n    });\n  });\n\n  // Закриття меню при кліку на overlay\n  if (mobileMenu) {\n    mobileMenu.addEventListener('click', e => {\n      if (e.target === mobileMenu) {\n        closeMobileMenu();\n      }\n    });\n  }\n}\n\nexport function getCurrentPage() {\n  return currentPage;\n}\n","import { openRatingModal } from './rating-modal.js';\nimport { isFavorite, toggleFavorite } from './favorites.js';\nimport { getCurrentPage } from './header.js';\nimport { loadFavoritesExercises } from './exercises.js';\n\nlet currentExerciseIdForRating = null;\n\n// Керування модальним вікном\nfunction closeExerciseModal() {\n  const modal = document.getElementById('js-exercise-modal');\n  if (!modal) return;\n\n  modal.classList.remove('exercise-modal--open');\n  modal.classList.remove('exercise-modal--hidden');\n\n  document.body.style.overflow = '';\n}\n\nexport function openExerciseModal(exerciseId) {\n  const modal = document.getElementById('js-exercise-modal');\n  if (!modal) return;\n\n  currentExerciseIdForRating = exerciseId;\n\n  modal.classList.add('exercise-modal--open');\n  modal.classList.remove('exercise-modal--hidden');\n  document.body.style.overflow = 'hidden';\n\n  // Отримання елементів DOM\n  const image = document.getElementById('js-exercise-modal-image');\n  const title = document.getElementById('js-exercise-modal-title');\n  const ratingValue = document.querySelector('.exercise-modal__rating-value');\n  const ratingStars = document.querySelector('.exercise-modal__rating-stars');\n  const target = document.getElementById('js-exercise-modal-target');\n  const bodyPart = document.getElementById('js-exercise-modal-body-part');\n  const equipment = document.getElementById('js-exercise-modal-equipment');\n  const popular = document.getElementById('js-exercise-modal-popular');\n  const calories = document.getElementById('js-exercise-modal-calories');\n  const time = document.getElementById('js-exercise-modal-time');\n  const description = document.getElementById('js-exercise-modal-description');\n\n  if (title) title.textContent = 'Loading...';\n  if (ratingValue) ratingValue.textContent = '0.0';\n  if (target) target.textContent = '';\n  if (bodyPart) bodyPart.textContent = '';\n  if (equipment) equipment.textContent = '';\n  if (popular) popular.textContent = '0';\n  if (calories) calories.textContent = '0';\n  if (time) time.textContent = '/0 min';\n  if (description) description.textContent = '';\n  if (image) image.src = '';\n\n  // Завантаження даних вправи з API\n  fetch(`https://your-energy.b.goit.study/api/exercises/${exerciseId}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Failed to fetch exercise details');\n      }\n      return response.json();\n    })\n    .then(exercise => {\n      // Оновлення контенту модального вікна\n      if (image) image.src = exercise.gifUrl || '';\n      if (title) title.textContent = exercise.name || '';\n      if (target) target.textContent = exercise.target || '';\n      if (bodyPart) bodyPart.textContent = exercise.bodyPart || '';\n      if (equipment) equipment.textContent = exercise.equipment || '';\n      if (popular) popular.textContent = exercise.popularity || 0;\n      if (calories) calories.textContent = exercise.burnedCalories || 0;\n      if (time) time.textContent = `/${exercise.time || 0} min`;\n      if (description) description.textContent = exercise.description || '';\n\n      // Оновлення рейтингу\n      if (ratingValue) {\n        ratingValue.textContent = (exercise.rating || 0).toFixed(1);\n      }\n\n      // Оновлення зірок рейтингу\n      if (ratingStars) {\n        const stars = ratingStars.querySelectorAll(\n          '.exercise-modal__rating-star'\n        );\n        const rating = Math.round(exercise.rating || 0);\n\n        stars.forEach((star, index) => {\n          const path = star.querySelector('path');\n          if (index < rating) {\n            path.setAttribute('fill', '#EEA10C');\n            path.removeAttribute('stroke');\n            path.removeAttribute('stroke-width');\n          } else {\n            path.setAttribute('fill', 'none');\n            path.setAttribute('stroke', 'rgba(255,255,255,0.3)');\n            path.setAttribute('stroke-width', '1.5');\n          }\n        });\n      }\n\n      updateFavoriteButton(exerciseId);\n\n      // Налаштування кнопки рейтингу\n      const ratingBtn = document.getElementById('js-exercise-modal-rating-btn');\n      if (ratingBtn) {\n        const newRatingBtn = ratingBtn.cloneNode(true);\n        ratingBtn.parentNode.replaceChild(newRatingBtn, ratingBtn);\n\n        newRatingBtn.addEventListener('click', () => {\n          const exerciseModal = document.getElementById('js-exercise-modal');\n          exerciseModal?.classList.add('exercise-modal--hidden');\n\n          openRatingModal(exerciseId);\n        });\n      }\n    })\n    .catch(error => {\n      // Обробка помилок\n      if (title) title.textContent = 'Error loading exercise';\n      if (description)\n        description.textContent =\n          'Failed to load exercise details. Please try again later.';\n    });\n}\n\n// Керування обраним\nfunction updateFavoriteButton(exerciseId) {\n  const favoriteBtn = document.getElementById('js-exercise-modal-favorites');\n  if (!favoriteBtn) return;\n\n  const isInFavorites = isFavorite(exerciseId);\n  const btnText = favoriteBtn.querySelector('span');\n  const btnIcon = favoriteBtn.querySelector('svg path');\n\n  if (isInFavorites) {\n    favoriteBtn.classList.add('active');\n    if (btnText) btnText.textContent = 'Remove from';\n    if (btnIcon) {\n      btnIcon.setAttribute('fill', 'currentColor');\n      btnIcon.removeAttribute('stroke');\n      btnIcon.removeAttribute('stroke-width');\n    }\n  } else {\n    favoriteBtn.classList.remove('active');\n    if (btnText) btnText.textContent = 'Add to favorites';\n    if (btnIcon) {\n      btnIcon.setAttribute('fill', 'none');\n      btnIcon.setAttribute('stroke', 'currentColor');\n      btnIcon.setAttribute('stroke-width', '2');\n    }\n  }\n}\n\nexport { closeExerciseModal };\n\nexport function initExerciseModal() {\n  const modalCloseBtn = document.getElementById('js-exercise-modal-close');\n  const modal = document.getElementById('js-exercise-modal');\n  const modalOverlay = modal?.querySelector('.exercise-modal__overlay');\n\n  // Обробник закриття модального вікна\n  if (modalCloseBtn) {\n    modalCloseBtn.addEventListener('click', closeExerciseModal);\n  }\n\n  if (modalOverlay) {\n    modalOverlay.addEventListener('click', closeExerciseModal);\n  }\n\n  // Обробник кнопки обраного\n  const favoriteBtn = document.getElementById('js-exercise-modal-favorites');\n  if (favoriteBtn) {\n    favoriteBtn.addEventListener('click', () => {\n      const exerciseId = currentExerciseIdForRating;\n      if (!exerciseId) return;\n\n      const wasAdded = toggleFavorite(exerciseId);\n      updateFavoriteButton(exerciseId);\n\n      if (!wasAdded && getCurrentPage() === 'favorites') {\n        closeExerciseModal();\n        loadFavoritesExercises();\n      }\n    });\n  }\n}\n","import { openExerciseModal } from './exercise-modal.js';\nimport { getFavorites } from './favorites.js';\nimport { showGlobalNotification } from './global-notification.js';\n\nlet currentFilter = 'Muscles';\nlet currentPage = 1;\nlet currentCategory = null;\nlet currentSearchKeyword = '';\nlet currentMode = 'home';\n\n// Утиліти визначення ліміту карток\nfunction getCategoriesLimit() {\n  const width = window.innerWidth;\n\n  if (width <= 767) return 9; // mobile\n  return 12; // desktop\n}\n\nfunction getExercisesLimit() {\n  const width = window.innerWidth;\n\n  if (width <= 767) return 8; // mobile\n  return 10; // desktop\n}\n\n// Утиліти для роботи із зображенням\nfunction createOptimizedImage(originalUrl, alt, className = '') {\n  if (!originalUrl) return '';\n\n  const proxyBase = 'https://wsrv.nl/?url=';\n\n  const sm = `${proxyBase}${originalUrl}&w=150&output=webp&q=75`;\n\n  const md = `${proxyBase}${originalUrl}&w=350&output=webp&q=75`;\n\n  const lg = `${proxyBase}${originalUrl}&w=700&output=webp&q=80`;\n\n  return `\n    <img \n      class=\"${className}\" \n      src=\"${md}\" \n      srcset=\"${sm} 150w, ${md} 350w, ${lg} 700w\"\n      sizes=\"(max-width: 767px) 150px, (max-width: 1440px) 350px, 350px\"\n      alt=\"${alt}\" \n      loading=\"lazy\" \n      decoding=\"async\"\n    />\n  `;\n}\n\n// Керування полем пошуку\nfunction showSearchField() {\n  const searchField = document.getElementById('js-exercises-search');\n  if (searchField) {\n    searchField.style.display = 'flex';\n  }\n}\n\nfunction hideSearchField() {\n  const searchField = document.getElementById('js-exercises-search');\n  const searchInput = document.getElementById('js-exercises-search-input');\n  if (searchField) {\n    searchField.style.display = 'none';\n  }\n  if (searchInput) {\n    searchInput.value = '';\n  }\n  currentSearchKeyword = '';\n}\n\n// Обробник подій\nexport function initCardsEventListener() {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) return;\n\n  cardsContainer.addEventListener('click', event => {\n    const startBtn = event.target.closest(\n      '.exercises__content__main__cards-item-start-btn'\n    );\n\n    if (startBtn) {\n      const exerciseCard = startBtn.closest(\n        '.exercises__content__main__cards-item--exercise'\n      );\n\n      if (!exerciseCard) return;\n\n      const exerciseId = exerciseCard.dataset.exerciseId;\n      if (!exerciseId) return;\n\n      openExerciseModal(exerciseId);\n      return;\n    }\n\n    const categoryCard = event.target.closest(\n      '.exercises__content__main__cards-item'\n    );\n\n    if (!categoryCard) return;\n\n    if (\n      categoryCard.classList.contains(\n        'exercises__content__main__cards-item--exercise'\n      )\n    ) {\n      return;\n    }\n\n    const categoryName = categoryCard.dataset.categoryName;\n    if (!categoryName) return;\n\n    loadExercisesByCategory(categoryName);\n  });\n}\n\nexport function initHashtags() {\n  const hashtagsContainer = document.querySelector('.home__hashtags');\n  if (!hashtagsContainer) return;\n\n  hashtagsContainer.addEventListener('click', event => {\n    const targetBtn = event.target.closest('button');\n    if (!targetBtn) return;\n\n    const keyword =\n      targetBtn.getAttribute('data-keyword') ||\n      targetBtn.textContent.replace('#', '').trim();\n\n    if (currentMode !== 'home') {\n      const homeLink = document.querySelector(\n        '.header__nav-link[data-page=\"home\"]'\n      );\n      if (homeLink) {\n        homeLink.click();\n      } else {\n        switchToHome();\n      }\n    }\n\n    const searchInput = document.getElementById('js-exercises-search-input');\n\n    if (searchInput) {\n      searchInput.value = keyword;\n    }\n\n    const exercisesContent = document.querySelector('.exercises__content');\n    if (exercisesContent) {\n      exercisesContent.scrollIntoView({ behavior: 'smooth' });\n    }\n\n    if (currentCategory) {\n      loadExercisesByCategory(currentCategory, 1, keyword);\n    } else {\n      showGlobalNotification(\n        'Please select a category (e.g., abs) to start searching.',\n        'error'\n      );\n    }\n  });\n}\n\n// Створення карток\nfunction createExerciseCard(exercise) {\n  return `\n    <div class=\"exercises__content__main__cards-item\" data-category-name=\"${exercise.name}\">\n      <div class=\"exercises__content__main__cards-item-image\">\n        ${createOptimizedImage(exercise.imgURL, `${exercise.name} exercise`)}\n        <div class=\"exercises__content__main__cards-item-overlay\">\n          <div class=\"exercises__content__main__cards-item-overlay-name\">${exercise.name}</div>\n          <div class=\"exercises__content__main__cards-item-overlay-category\">${exercise.filter}</div>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\nfunction createExerciseItemCard(exercise) {\n  const rating = exercise.rating || 0;\n  const burnedCalories = exercise.burnedCalories || 0;\n  const time = exercise.time || 0;\n  const bodyPart = exercise.bodyPart || '';\n  const target = exercise.target || '';\n  const exerciseId = exercise._id || '';\n\n  return `\n    <li class=\"exercises__content__main__cards-item exercises__content__main__cards-item--exercise\" data-exercise-id=\"${exerciseId}\">\n      <div class=\"exercises__content__main__cards-item-header\">\n        <div class=\"exercises__content__main__cards-item-header-left\">\n          <button disabled class=\"exercises__content__main__cards-item-workout-btn\">WORKOUT</button>\n          <div class=\"exercises__content__main__cards-item-rating\">\n            <span class=\"exercises__content__main__cards-item-rating-value\">${rating.toFixed(\n              1\n            )}</span>\n            <svg class=\"exercises__content__main__cards-item-rating-star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z\" fill=\"#EEA10C\"/>\n            </svg>\n          </div>\n        </div>\n        <button class=\"exercises__content__main__cards-item-start-btn\">\n          Start\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M6.75 4.5L11.25 9L6.75 13.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </button>\n      </div>\n      <div class=\"exercises__content__main__cards-item-body\">\n        <div class=\"exercises__content__main__cards-item-icon\">\n          <svg width=\"34\" height=\"32\" viewBox=\"0 0 34 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"rgba(36, 36, 36, 1)\" fill-opacity=\"0.2\"/>\n            <path d=\"M24.7293 11.907C24.4611 11.594 23.9834 11.5528 23.6631 11.8138L21.5637 13.5369L20.5983 11.1998C20.564 11.1121 20.5119 11.0384 20.452 10.9734C20.2547 10.5446 19.9122 10.1763 19.44 9.96297C19.235 9.872 19.0233 9.82326 18.8116 9.79944C18.765 9.77561 18.7229 9.7442 18.6697 9.72796L14.9754 8.72184C14.7681 8.6666 14.5597 8.70234 14.3891 8.79981C14.1862 8.86696 14.0122 9.011 13.9291 9.22002L12.538 12.7149C12.3873 13.0951 12.5801 13.5239 12.9703 13.6734C13.3582 13.8207 13.7983 13.6311 13.9501 13.2499L15.125 10.2987L16.8076 10.7557C16.7666 10.8207 16.7222 10.8814 16.689 10.9507L14.532 15.5188C14.501 15.586 14.4844 15.6542 14.4622 15.7235L11.8408 20.0177L7.45378 21.4516C6.95721 21.8144 6.85192 22.4978 7.2188 22.983C7.5879 23.4692 8.28951 23.5721 8.78497 23.2137L13.274 21.7029C13.4114 21.6054 13.5112 21.4776 13.5866 21.34C13.6431 21.2816 13.7074 21.235 13.7506 21.1624L15.3135 18.6022L18.0878 20.9123L15.1195 24.1808C14.7105 24.6313 14.7515 25.3255 15.2148 25.7241C15.677 26.1259 16.3853 26.0836 16.7965 25.6309L20.5008 21.5534C20.6161 21.4278 20.6848 21.2826 20.7313 21.131C20.759 21.0487 20.759 20.9632 20.7657 20.8776C20.7657 20.8343 20.7823 20.7953 20.779 20.7552C20.769 20.4563 20.6449 20.1661 20.3944 19.9592L17.8417 17.8322C18.0257 17.661 18.182 17.4574 18.2951 17.2181L19.9488 13.7189L20.4786 15.0975C20.5008 15.2199 20.5429 15.3401 20.6316 15.4409C20.7114 15.534 20.8134 15.5957 20.922 15.6391C20.9331 15.6445 20.9464 15.6456 20.9597 15.6488C21.0284 15.6726 21.0982 15.6954 21.1703 15.6986C21.2556 15.7062 21.3421 15.6954 21.4296 15.6715C21.4318 15.6705 21.4329 15.6705 21.4329 15.6705C21.4562 15.665 21.4795 15.6694 21.5028 15.6596C21.6258 15.6141 21.72 15.5372 21.8009 15.4474L24.8136 12.9488C25.1339 12.6857 24.9987 12.22 24.7293 11.907Z\" fill=\"#F4F4F4\"/>\n            <path d=\"M20.9191 10.1263C22.0853 10.1263 23.0306 9.20259 23.0306 8.06314C23.0306 6.9237 22.0853 6 20.9191 6C19.753 6 18.8076 6.9237 18.8076 8.06314C18.8076 9.20259 19.753 10.1263 20.9191 10.1263Z\" fill=\"#F4F4F4\"/>\n          </svg>\n        </div>\n        <h3 class=\"exercises__content__main__cards-item-title\">${\n          exercise.name\n        }</h3>\n      </div>\n      <div class=\"exercises__content__main__cards-item-footer\">\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Burned calories:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${burnedCalories}</span>\n          <span class=\"exercises__content__main__cards-item-info-label\">/ ${time} min</span>\n        </div>\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Body part:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${bodyPart}</span>\n        </div>\n        <div class=\"exercises__content__main__cards-item-info\">\n          <span class=\"exercises__content__main__cards-item-info-label\">Target:</span>\n          <span class=\"exercises__content__main__cards-item-info-value\">${target}</span>\n        </div>\n      </div>\n    </li>\n  `;\n}\n\n// Рендеринг карток\nfunction renderExerciseCards(exercises) {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  cardsContainer.classList.remove('exercises__content__main__cards--exercises');\n\n  cardsContainer.innerHTML = '';\n\n  exercises.forEach(exercise => {\n    const cardHTML = createExerciseCard(exercise);\n    cardsContainer.insertAdjacentHTML('beforeend', cardHTML);\n  });\n}\n\nfunction renderExerciseItemCards(exercises) {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\n\n  cardsContainer.innerHTML = '';\n\n  exercises.forEach(exercise => {\n    const cardHTML = createExerciseItemCard(exercise);\n    cardsContainer.insertAdjacentHTML('beforeend', cardHTML);\n  });\n}\n\nfunction renderEmptyState() {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\n\n  cardsContainer.innerHTML = '';\n\n  const emptyStateHTML = `\n    <div class=\"exercises__content__main__empty-state\">\n      <p class=\"exercises__content__main__empty-state-text\">\n        Unfortunately, no results were found. You may want to consider other search options.\n      </p>\n    </div>\n  `;\n\n  cardsContainer.insertAdjacentHTML('beforeend', emptyStateHTML);\n}\n\n// Навігація\nexport function updateBreadcrumbs(categoryName = null) {\n  const breadcrumbsContainer = document.getElementById(\n    'js-exercises-breadcrumbs'\n  );\n\n  if (!breadcrumbsContainer) {\n    return;\n  }\n\n  breadcrumbsContainer.innerHTML = '';\n\n  if (currentMode === 'favorites') {\n    const favoritesTitle = document.createElement('button');\n    favoritesTitle.className =\n      'exercises__content__header-breadcrumbs-item exercises__content__header-breadcrumbs-item--active';\n    favoritesTitle.textContent = 'Favorites';\n    favoritesTitle.setAttribute('data-breadcrumb', 'favorites');\n    breadcrumbsContainer.appendChild(favoritesTitle);\n    return;\n  }\n\n  const exercisesBtn = document.createElement('button');\n  exercisesBtn.className = 'exercises__content__header-breadcrumbs-item';\n  exercisesBtn.textContent = 'Exercises';\n  exercisesBtn.setAttribute('data-breadcrumb', 'exercises');\n\n  if (!categoryName) {\n    exercisesBtn.classList.add(\n      'exercises__content__header-breadcrumbs-item--active'\n    );\n  }\n\n  exercisesBtn.addEventListener('click', () => {\n    currentCategory = null;\n    currentPage = 1;\n    loadExerciseCards(currentFilter, currentPage);\n  });\n\n  breadcrumbsContainer.appendChild(exercisesBtn);\n\n  if (categoryName) {\n    const separator = document.createElement('span');\n    separator.className = 'exercises__content__header-breadcrumbs-separator';\n    separator.textContent = '/';\n    breadcrumbsContainer.appendChild(separator);\n\n    const categoryBtn = document.createElement('button');\n    categoryBtn.className =\n      'exercises__content__header-breadcrumbs-item exercises__content__header-breadcrumbs-item--active';\n    categoryBtn.textContent = categoryName;\n    breadcrumbsContainer.appendChild(categoryBtn);\n  }\n}\n\n// Пагінація\nfunction renderPagination(totalPages, page = 1) {\n  const paginationContainer = document.querySelector(\n    '.exercises__content__pagination'\n  );\n\n  if (!paginationContainer) {\n    return;\n  }\n\n  paginationContainer.innerHTML = '';\n\n  if (totalPages <= 1) {\n    return;\n  }\n\n  const goToPage = pageNumber => {\n    currentPage = pageNumber;\n    if (currentMode === 'favorites') {\n      loadFavoritesExercises(pageNumber);\n    } else if (currentCategory) {\n      loadExercisesByCategory(\n        currentCategory,\n        pageNumber,\n        currentSearchKeyword\n      );\n    } else {\n      loadExerciseCards(currentFilter, pageNumber);\n    }\n  };\n\n  const createArrow = (html, isDisabled, onClick) => {\n    const btn = document.createElement('button');\n    btn.className = 'exercises__content__pagination-arrow';\n    btn.innerHTML = html;\n    btn.disabled = isDisabled;\n    btn.addEventListener('click', onClick);\n    return btn;\n  };\n\n  const createPageBtn = num => {\n    const btn = document.createElement('button');\n    btn.className = 'exercises__content__pagination-page';\n    btn.textContent = num;\n    if (num === page)\n      btn.classList.add('exercises__content__pagination-page--active');\n    btn.addEventListener('click', () => goToPage(num));\n    return btn;\n  };\n\n  const createEllipsis = () => {\n    const span = document.createElement('span');\n    span.className = 'exercises__content__pagination-ellipsis';\n    span.textContent = '...';\n    return span;\n  };\n\n  paginationContainer.appendChild(\n    createArrow('&laquo;', page === 1, () => goToPage(1))\n  );\n  paginationContainer.appendChild(\n    createArrow('&lsaquo;', page === 1, () => goToPage(page - 1))\n  );\n\n  const pages = [];\n  pages.push(1);\n\n  if (totalPages <= 7) {\n    for (let i = 2; i <= totalPages; i++) {\n      pages.push(i);\n    }\n  } else {\n    let leftBound = page - 1;\n    let rightBound = page + 1;\n\n    if (page < 5) {\n      leftBound = 2;\n      rightBound = 5;\n    }\n\n    if (page > totalPages - 4) {\n      leftBound = totalPages - 4;\n      rightBound = totalPages - 1;\n    }\n\n    if (leftBound > 2) {\n      pages.push('...');\n    }\n\n    for (let i = leftBound; i <= rightBound; i++) {\n      if (i > 1 && i < totalPages) {\n        pages.push(i);\n      }\n    }\n\n    if (rightBound < totalPages - 1) {\n      pages.push('...');\n    }\n\n    if (totalPages > 1) {\n      pages.push(totalPages);\n    }\n  }\n\n  pages.forEach(item => {\n    if (item === '...') {\n      paginationContainer.appendChild(createEllipsis());\n    } else {\n      paginationContainer.appendChild(createPageBtn(item));\n    }\n  });\n\n  paginationContainer.appendChild(\n    createArrow('&rsaquo;', page === totalPages, () => goToPage(page + 1))\n  );\n  paginationContainer.appendChild(\n    createArrow('&raquo;', page === totalPages, () => goToPage(totalPages))\n  );\n}\n\n// Завантаження даних\nexport function loadExerciseCards(filter, page = 1) {\n  currentFilter = filter;\n  currentPage = page;\n\n  hideSearchField();\n  const encodedFilter = encodeURIComponent(filter);\n  const limit = getCategoriesLimit();\n  const url = `https://your-energy.b.goit.study/api/filters?filter=${encodedFilter}&page=${page}&limit=${limit}`;\n\n  fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      const exercises = data.results || data.exercises || data || [];\n\n      const totalPages =\n        data.totalPages || data.total_pages || data.pageCount || 1;\n\n      if (Array.isArray(exercises) && exercises.length > 0) {\n        currentCategory = null;\n        updateBreadcrumbs(null);\n        renderExerciseCards(exercises);\n        renderPagination(totalPages, page);\n      } else {\n        updateBreadcrumbs(null);\n        renderPagination(1, 1);\n      }\n    });\n}\n\nexport function loadExercisesByCategory(\n  categoryName,\n  page = 1,\n  keyword = currentSearchKeyword\n) {\n  currentCategory = categoryName;\n  currentPage = page;\n  currentSearchKeyword = keyword;\n\n  showSearchField();\n  const limit = getExercisesLimit();\n\n  let paramName = '';\n  if (currentFilter === 'Muscles') {\n    paramName = 'muscles';\n  } else if (currentFilter === 'Body parts') {\n    paramName = 'bodypart';\n  } else if (currentFilter === 'Equipment') {\n    paramName = 'equipment';\n  }\n\n  const encodedCategory = encodeURIComponent(categoryName);\n  let url = `https://your-energy.b.goit.study/api/exercises?${paramName}=${encodedCategory}&page=${page}&limit=${limit}`;\n\n  if (keyword && keyword.trim() !== '') {\n    const encodedKeyword = encodeURIComponent(keyword.trim());\n    url += `&keyword=${encodedKeyword}`;\n  }\n\n  fetch(url)\n    .then(response => {\n      if (response.status === 409) return { results: [], totalPages: 0 };\n      if (!response.ok) throw new Error('Search failed');\n      return response.json();\n    })\n    .then(data => {\n      const exercises = data.results || [];\n\n      const totalPages = data.totalPages || 1;\n\n      updateBreadcrumbs(categoryName);\n\n      if (Array.isArray(exercises) && exercises.length > 0) {\n        renderExerciseItemCards(exercises);\n        renderPagination(totalPages, page);\n      } else {\n        renderEmptyState();\n        const paginationContainer = document.querySelector(\n          '.exercises__content__pagination'\n        );\n        if (paginationContainer) {\n          paginationContainer.innerHTML = '';\n        }\n      }\n    });\n}\n\nexport function initSearch() {\n  const searchContainer = document.getElementById('js-exercises-search');\n  const searchInput = document.getElementById('js-exercises-search-input');\n\n  if (!searchContainer || !searchInput) return;\n\n  const handleSearchSubmit = () => {\n    const keyword = searchInput.value.trim().toLowerCase();\n\n    if (currentCategory) {\n      loadExercisesByCategory(currentCategory, 1, keyword);\n    } else {\n      showGlobalNotification('Please select a category first', 'error');\n    }\n  };\n\n  searchInput.addEventListener('input', event => {\n    const text = event.target.value.trim();\n\n    if (text === '' && currentCategory) {\n      loadExercisesByCategory(currentCategory, 1, '');\n    }\n  });\n\n  searchInput.addEventListener('keydown', event => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      handleSearchSubmit();\n    }\n  });\n\n  const searchIcon = searchContainer.querySelector(\n    '.exercises__content__header-search-icon'\n  );\n  if (searchIcon) {\n    searchIcon.addEventListener('click', handleSearchSubmit);\n  }\n}\n\nfunction renderFavoritesEmptyState() {\n  const cardsContainer = document.querySelector(\n    '.exercises__content__main__cards'\n  );\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\n\n  cardsContainer.innerHTML = '';\n\n  const emptyStateHTML = `\n    <div class=\"exercises__content__main__empty-state\">\n      <p class=\"exercises__content__main__empty-state-text\">\n        It appears that you haven't added any exercises to your favorites yet. \n        To get started, you can add exercises that you like to your favorites \n        for easier access in the future.\n      </p>\n    </div>\n  `;\n\n  cardsContainer.insertAdjacentHTML('beforeend', emptyStateHTML);\n}\n\nexport function loadFavoritesExercises(page = 1) {\n  currentPage = page;\n\n  const favoriteIds = getFavorites();\n  const limit = getExercisesLimit();\n\n  updateBreadcrumbs(null);\n\n  if (favoriteIds.length === 0) {\n    renderFavoritesEmptyState();\n    const paginationContainer = document.querySelector(\n      '.exercises__content__pagination'\n    );\n    if (paginationContainer) paginationContainer.innerHTML = '';\n    return;\n  }\n\n  const totalPages = Math.ceil(favoriteIds.length / limit);\n\n  if (page > totalPages) {\n    page = totalPages;\n    currentPage = page;\n  }\n\n  const startIndex = (page - 1) * limit;\n  const endIndex = startIndex + limit;\n  const idsToLoad = favoriteIds.slice(startIndex, endIndex);\n\n  const promises = idsToLoad.map(id =>\n    fetch(`https://your-energy.b.goit.study/api/exercises/${id}`)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error('Failed to fetch exercise');\n        }\n        return response.json();\n      })\n      .catch(error => {\n        return null;\n      })\n  );\n\n  Promise.all(promises).then(exercises => {\n    const validExercises = exercises.filter(ex => ex !== null);\n\n    if (validExercises.length > 0) {\n      renderExerciseItemCards(validExercises);\n      renderPagination(totalPages, page);\n    } else {\n      renderFavoritesEmptyState();\n    }\n  });\n}\n\n// Перемикання режимів\nexport function switchToHome() {\n  currentMode = 'home';\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  // Показуємо фільтри\n  const filtersContainer = document.querySelector(\n    '.exercises__content__header-filters'\n  );\n  if (filtersContainer) {\n    filtersContainer.style.display = 'flex';\n  }\n\n  // Видаляємо клас favorites з контейнера\n  const contentContainer = document.querySelector('.exercises__content');\n  if (contentContainer) {\n    contentContainer.classList.remove('exercises__content--favorites');\n  }\n\n  // Завантажуємо стандартні картки\n  loadExerciseCards(currentFilter, 1);\n}\n\nexport function switchToFavorites() {\n  currentMode = 'favorites';\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  const filtersContainer = document.querySelector(\n    '.exercises__content__header-filters'\n  );\n  if (filtersContainer) {\n    filtersContainer.style.display = 'none';\n  }\n\n  hideSearchField();\n\n  const contentContainer = document.querySelector('.exercises__content');\n  if (contentContainer) {\n    contentContainer.classList.add('exercises__content--favorites');\n  }\n\n  loadFavoritesExercises();\n}\n\n// Adaptive re-render on resize\nlet resizeTimeout;\n\nwindow.addEventListener('resize', () => {\n  clearTimeout(resizeTimeout);\n\n  resizeTimeout = setTimeout(() => {\n    currentPage = 1;\n\n    if (currentMode === 'favorites') {\n      loadFavoritesExercises(1);\n    } else if (currentCategory) {\n      loadExercisesByCategory(currentCategory, 1, currentSearchKeyword);\n    } else {\n      loadExerciseCards(currentFilter, 1);\n    }\n  }, 200);\n});\n","import { showGlobalNotification } from './global-notification.js';\nimport { showFieldError, hideFieldError, validateEmail } from './form-validation.js';\n\nexport function initFooterSubscription() {\n  const form = document.getElementById('subscribeForm');\n  const emailInput = document.getElementById('subscribeEmail');\n  const errorElement = document.getElementById('subscribeEmailError');\n\n  if (!form || !emailInput || !errorElement) return;\n\n    emailInput.addEventListener('input', () => {\n    if (validateEmail(emailInput.value) || emailInput.value.trim() === '') {\n      hideFieldError(emailInput, errorElement);\n    }\n  });\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const email = emailInput.value.trim();\n\n    if (!email) {\n      showFieldError(emailInput, errorElement, 'Please enter your email address');\n      return;\n    }\n\n    if (!validateEmail(email)) {\n      showFieldError(emailInput, errorElement, 'Please enter a valid email address (e.g. name@gmail.com)');\n      return;\n    }\n\n    hideFieldError(emailInput, errorElement);\n\n    try {\n      const response = await fetch('https://your-energy.b.goit.study/api/subscription', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        showGlobalNotification(data.message, 'success');\n        form.reset();\n      } \n      else if (response.status === 409) {\n        showGlobalNotification(\"You've already subscribed. No need to resubscribe.\", 'warning');\n        form.reset();\n      } \n      else {\n        throw new Error('Subscription failed');\n      }\n\n    } catch (error) {\n      showGlobalNotification('Something went wrong. Please try again later.', 'error');\n      console.error(error);\n    }\n  });\n}","// Утиліти для роботи для датою\nfunction getTodayDate() {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n// Завантаження цитати\nasync function loadQuoteOfTheDay() {\n  const cachedQuoteText = localStorage.getItem('quote-text');\n  const cachedQuoteAuthor = localStorage.getItem('quote-author');\n  const cachedQuoteDate = localStorage.getItem('quote-date');\n  const todayDate = getTodayDate();\n\n  if (cachedQuoteText && cachedQuoteAuthor && cachedQuoteDate) {\n    if (cachedQuoteDate === todayDate) {\n      return { quote: cachedQuoteText, author: cachedQuoteAuthor };\n    }\n  }\n\n  // Завантаження нової цитати з API\n  try {\n    const response = await fetch('https://your-energy.b.goit.study/api/quote');\n    const data = await response.json();\n\n    localStorage.setItem('quote-text', data.quote);\n    localStorage.setItem('quote-author', data.author);\n    localStorage.setItem('quote-date', todayDate);\n\n    return { quote: data.quote, author: data.author };\n  } catch (error) {\n    if (cachedQuoteText && cachedQuoteAuthor) {\n      return { quote: cachedQuoteText, author: cachedQuoteAuthor };\n    }\n\n    return null;\n  }\n}\n\n// Відображення цитати\nexport async function displayQuote() {\n  const quoteData = await loadQuoteOfTheDay();\n\n  if (!quoteData) {\n    return;\n  }\n\n  const quoteTextElement = document.getElementById('js-exercises-quote-text');\n  const quoteAuthorElement = document.getElementById(\n    'js-exercises-quote-author'\n  );\n\n  if (quoteTextElement) {\n    quoteTextElement.textContent = quoteData.quote;\n  }\n\n  if (quoteAuthorElement) {\n    quoteAuthorElement.textContent = quoteData.author;\n  }\n}\n","import 'modern-normalize/modern-normalize.css';\nimport './css/main.scss';\n\nimport {\n  loadExerciseCards,\n  updateBreadcrumbs,\n  initSearch,\n  initCardsEventListener,\n  initHashtags,\n} from './js/exercises.js';\nimport { initExerciseModal, closeExerciseModal } from './js/exercise-modal.js';\nimport { initRatingModal, closeRatingModal } from './js/rating-modal.js';\nimport {\n  initGlobalNotification,\n  showGlobalNotification,\n} from './js/global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './js/form-validation.js';\nimport { initFooterSubscription } from './js/email-validation.js';\nimport { initHeader } from './js/header.js';\nimport { displayQuote } from './js/quote.js';\n\ndisplayQuote();\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initExerciseModal();\n  initRatingModal();\n\n  initGlobalNotification();\n\n  initHeader();\n\n  initSearch();\n\n  initCardsEventListener();\n\n  initHashtags();\n\n  initFooterSubscription();\n\n  loadExerciseCards('Muscles', 1);\n\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape') {\n      closeExerciseModal();\n      closeRatingModal();\n    }\n  });\n\n  const filterButtons = document.querySelectorAll(\n    '.exercises__content__header-filters-item'\n  );\n\n  filterButtons.forEach(button => {\n    button.addEventListener('click', () => {\n      filterButtons.forEach(btn =>\n        btn.classList.remove('exercises__content__header-filters-item--active')\n      );\n\n      button.classList.add('exercises__content__header-filters-item--active');\n\n      const filter = button.getAttribute('data-filter');\n      updateBreadcrumbs(null);\n\n      loadExerciseCards(filter, 1);\n    });\n  });\n});\n"],"names":["notificationTimeout","showGlobalNotification","message","type","notification","textElement","hideGlobalNotification","initGlobalNotification","closeBtn","showFieldError","inputElement","errorElement","errorClass","hideFieldError","validateEmail","email","currentExerciseIdForRating","showServerMessage","messageElement","messageTextElement","hideServerMessage","closeRatingModal","ratingModal","exerciseModal","emailInput","emailError","commentTextarea","commentError","ratingError","openRatingModal","exerciseId","modal","form","ratingValue","stars","star","svg","path","initRatingModal","ratingModalCloseBtn","ratingModalOverlay","serverMessageCloseBtn","ratingStars","selectedRating","index","s","i","hoverRating","ratingForm","e","hasErrors","review","response","data","exerciseName","error","errorMessage","FAVORITES_KEY","getFavorites","favorites","addToFavorites","removeFromFavorites","filteredFavorites","id","isFavorite","toggleFavorite","currentPage","mobileMenu","burgerButton","closeButton","overlay","switchPage","page","link","switchToHome","switchToFavorites","openMobileMenu","closeMobileMenu","initHeader","getCurrentPage","closeExerciseModal","openExerciseModal","image","title","target","bodyPart","equipment","popular","calories","time","description","exercise","rating","updateFavoriteButton","ratingBtn","newRatingBtn","favoriteBtn","isInFavorites","btnText","btnIcon","initExerciseModal","modalCloseBtn","modalOverlay","wasAdded","loadFavoritesExercises","currentFilter","currentCategory","currentSearchKeyword","currentMode","getCategoriesLimit","getExercisesLimit","createOptimizedImage","originalUrl","alt","className","proxyBase","sm","md","lg","showSearchField","searchField","hideSearchField","searchInput","initCardsEventListener","cardsContainer","event","startBtn","exerciseCard","categoryCard","categoryName","loadExercisesByCategory","initHashtags","hashtagsContainer","targetBtn","keyword","homeLink","exercisesContent","createExerciseCard","createExerciseItemCard","burnedCalories","renderExerciseCards","exercises","cardHTML","renderExerciseItemCards","renderEmptyState","updateBreadcrumbs","breadcrumbsContainer","favoritesTitle","exercisesBtn","loadExerciseCards","separator","categoryBtn","renderPagination","totalPages","paginationContainer","goToPage","pageNumber","createArrow","html","isDisabled","onClick","btn","createPageBtn","num","createEllipsis","span","pages","leftBound","rightBound","item","filter","encodedFilter","limit","url","paramName","encodedCategory","encodedKeyword","initSearch","searchContainer","handleSearchSubmit","searchIcon","renderFavoritesEmptyState","favoriteIds","startIndex","endIndex","promises","validExercises","ex","filtersContainer","contentContainer","resizeTimeout","initFooterSubscription","getTodayDate","today","year","month","day","loadQuoteOfTheDay","cachedQuoteText","cachedQuoteAuthor","cachedQuoteDate","todayDate","displayQuote","quoteData","quoteTextElement","quoteAuthorElement","filterButtons","button"],"mappings":"0uBAAA,IAAIA,EAAsB,KAOnB,SAASC,EAAuBC,EAASC,EAAO,UAAW,CAChE,MAAMC,EAAe,SAAS,eAAe,wBAAwB,EAC/DC,EAAc,SAAS,eAAe,6BAA6B,EAErE,CAACD,GAAgB,CAACC,IAElBL,IACF,aAAaA,CAAmB,EAChCA,EAAsB,MAGxBK,EAAY,YAAcH,EAC1BE,EAAa,UAAU,OAAO,4BAA4B,EACtDD,IAAS,QACXC,EAAa,UAAU,IAAI,4BAA4B,EAC9CD,IAAS,WAClBC,EAAa,UAAU,IAAI,8BAA8B,EAG3DA,EAAa,UAAU,IAAI,8BAA8B,EAEzDJ,EAAsB,WAAW,IAAM,CACrCM,IACD,EAAE,GAAI,EACT,CAEO,SAASA,IAAyB,CACvC,MAAMF,EAAe,SAAS,eAAe,wBAAwB,EAC/DC,EAAc,SAAS,eAAe,6BAA6B,EAEpED,IAEDJ,IACF,aAAaA,CAAmB,EAChCA,EAAsB,MAGxBI,EAAa,UAAU,OAAO,8BAA8B,EAE5D,WAAW,IAAM,CACXC,IACFA,EAAY,YAAc,IAE5BD,EAAa,UAAU,OAAO,6BAA8B,8BAA8B,CAC3F,EAAE,GAAG,EACR,CAEO,SAASG,IAAyB,CACvC,MAAMC,EAAW,SAAS,eAAe,8BAA8B,EAEnEA,GACFA,EAAS,iBAAiB,QAASF,EAAsB,CAE7D,CCjDO,SAASG,EAAeC,EAAcC,EAAcT,EAAS,CAClE,GAAIQ,EAAc,CAChB,MAAME,EAAaF,EAAa,UAAU,SAAS,wBAAwB,EACvE,gCACAA,EAAa,UAAU,SAAS,qBAAqB,EACnD,6BACAA,EAAa,UAAU,SAAS,8BAA8B,EAC5D,sCACA,oBAERA,EAAa,UAAU,IAAIE,CAAU,CACtC,CAEGD,IACFA,EAAa,YAAcT,EAC3BS,EAAa,UAAU,IAAI,qBAAqB,EAEpD,CAOO,SAASE,EAAeH,EAAcC,EAAc,CACrDD,GACFA,EAAa,UAAU,OACrB,6BACA,gCACA,sCACA,mBACN,EAGMC,IACFA,EAAa,YAAc,GAC3BA,EAAa,UAAU,OAAO,qBAAqB,EAEvD,CAOO,SAASG,EAAcC,EAAO,CAEnC,MADmB,6BACD,KAAKA,CAAK,CAC9B,CAYA,SAAS,eAAe,MAAM,EAAE,YAAc,IAAI,KAAM,EAAC,YAAa,EChEtE,IAAIC,EAA6B,KAGjC,SAASC,GAAkBf,EAASC,EAAO,QAAS,CAClD,MAAMe,EAAiB,SAAS,eAAe,0BAA0B,EACnEC,EAAqB,SAAS,eAClC,+BACJ,EACM,CAACD,GAAkB,CAACC,IAExBA,EAAmB,YAAcjB,EACjCgB,EAAe,UAAU,OACvB,sCACA,uCACJ,EACEA,EAAe,UAAU,IAAI,iCAAiCf,CAAI,EAAE,EACpEe,EAAe,UAAU,IAAI,uCAAuC,EACtE,CAEA,SAASE,GAAoB,CAC3B,MAAMF,EAAiB,SAAS,eAAe,0BAA0B,EACnEC,EAAqB,SAAS,eAClC,+BACJ,EACOD,IAELA,EAAe,UAAU,OAAO,uCAAuC,EACnEC,IACFA,EAAmB,YAAc,IAEnCD,EAAe,UAAU,OACvB,sCACA,uCACJ,EACA,CAGA,SAASG,GAAmB,CAC1B,MAAMC,EAAc,SAAS,eAAe,iBAAiB,EAC7D,GAAI,CAACA,EAAa,OAGlBA,EAAY,UAAU,OAAO,oBAAoB,EAGjD,MAAMC,EAAgB,SAAS,eAAe,mBAAmB,EACjEA,GAAA,MAAAA,EAAe,UAAU,OAAO,0BAGhC,SAAS,KAAK,MAAM,SAAW,SAE/BP,EAA6B,KAG7B,MAAMQ,EAAa,SAAS,eAAe,uBAAuB,EAC5DC,EAAa,SAAS,eAAe,gBAAgB,EACrDC,EAAkB,SAAS,eAAe,yBAAyB,EACnEC,EAAe,SAAS,eAAe,kBAAkB,EACzDC,EAAc,SAAS,eAAe,iBAAiB,EAE7Df,EAAeW,EAAYC,CAAU,EACrCZ,EAAea,EAAiBC,CAAY,EAC5Cd,EAAe,KAAMe,CAAW,EAChCR,GACF,CAEO,SAASS,GAAgBC,EAAY,CAC1C,MAAMC,EAAQ,SAAS,eAAe,iBAAiB,EACvD,GAAI,CAACA,EAAO,OAEZA,EAAM,UAAU,IAAI,oBAAoB,EACxCf,EAA6Bc,EAG7B,MAAME,EAAO,SAAS,eAAe,sBAAsB,EACrDR,EAAa,SAAS,eAAe,uBAAuB,EAC5DE,EAAkB,SAAS,eAAe,yBAAyB,EACnEO,EAAc,SAAS,eAAe,uBAAuB,EAC7DC,EAAQ,SAAS,iBAAiB,qBAAqB,EAGzDF,GAAMA,EAAK,QACXC,IAAaA,EAAY,YAAc,OAG3C,MAAMR,EAAa,SAAS,eAAe,gBAAgB,EACrDE,EAAe,SAAS,eAAe,kBAAkB,EACzDC,EAAc,SAAS,eAAe,iBAAiB,EAC7Df,EAAeW,EAAYC,CAAU,EACrCZ,EAAea,EAAiBC,CAAY,EAC5Cd,EAAe,KAAMe,CAAW,EAChCR,IAGAc,EAAM,QAAQC,GAAQ,CACpBA,EAAK,UAAU,OAAO,4BAA4B,EAClD,MAAMC,EAAMD,EAAK,cAAc,KAAK,EACpC,GAAIC,EAAK,CACP,MAAMC,EAAOD,EAAI,cAAc,MAAM,EACjCC,IACFA,EAAK,aAAa,OAAQ,MAAM,EAChCA,EAAK,aAAa,SAAU,cAAc,EAE7C,CACL,CAAG,EAGDN,EAAM,UAAU,IAAI,oBAAoB,EACxC,SAAS,KAAK,MAAM,SAAW,QACjC,CAKO,SAASO,IAAkB,CAChC,MAAMC,EAAsB,SAAS,eAAe,uBAAuB,EACrEjB,EAAc,SAAS,eAAe,iBAAiB,EACvDkB,EAAqBlB,GAAA,YAAAA,EAAa,cACtC,0BAGEiB,GACFA,EAAoB,iBAAiB,QAASlB,CAAgB,EAG5DmB,GACFA,EAAmB,iBAAiB,QAASnB,CAAgB,EAI/D,MAAMoB,EAAwB,SAAS,eACrC,gCACJ,EACMA,GACFA,EAAsB,iBAAiB,QAASrB,CAAiB,EAInE,MAAMsB,EAAc,SAAS,iBAAiB,qBAAqB,EAC7DT,EAAc,SAAS,eAAe,uBAAuB,EACnE,IAAIU,EAAiB,EAErBD,EAAY,QAAQ,CAACP,EAAMS,IAAU,CACnCT,EAAK,iBAAiB,QAAS,IAAM,CACnCQ,EAAiBC,EAAQ,EAErBX,IACFA,EAAY,YAAcU,EAAe,QAAQ,CAAC,GAGpDD,EAAY,QAAQ,CAACG,EAAGC,IAAM,CAC5B,GAAIA,EAAIH,EAAgB,CACtBE,EAAE,UAAU,IAAI,4BAA4B,EAC5C,MAAMT,EAAMS,EAAE,cAAc,KAAK,EACjC,GAAIT,EAAK,CACP,MAAMC,EAAOD,EAAI,cAAc,MAAM,EACjCC,IACFA,EAAK,aAAa,OAAQ,SAAS,EACnCA,EAAK,aAAa,SAAU,SAAS,EAExC,CACX,KAAe,CACLQ,EAAE,UAAU,OAAO,4BAA4B,EAC/C,MAAMT,EAAMS,EAAE,cAAc,KAAK,EACjC,GAAIT,EAAK,CACP,MAAMC,EAAOD,EAAI,cAAc,MAAM,EACjCC,IACFA,EAAK,aAAa,OAAQ,MAAM,EAChCA,EAAK,aAAa,SAAU,cAAc,EAE7C,CACF,CACT,CAAO,CACP,CAAK,EAGDF,EAAK,iBAAiB,aAAc,IAAM,CACxC,MAAMY,EAAcH,EAAQ,EAC5BF,EAAY,QAAQ,CAACG,EAAGC,IAAM,CAE1BA,EAAIC,GACJ,CAACF,EAAE,UAAU,SAAS,4BAA4B,IAElDA,EAAE,MAAM,MAAQ,2BAE1B,CAAO,CACP,CAAK,EAEDV,EAAK,iBAAiB,aAAc,IAAM,CACxCO,EAAY,QAAQ,CAACG,EAAGC,IAAM,CACvBD,EAAE,UAAU,SAAS,4BAA4B,IACpDA,EAAE,MAAM,MAAQ,2BAE1B,CAAO,CACP,CAAK,CACL,CAAG,EAGD,MAAMrB,EAAa,SAAS,eAAe,uBAAuB,EAC5DC,EAAa,SAAS,eAAe,gBAAgB,EACrDC,EAAkB,SAAS,eAAe,yBAAyB,EACnEC,EAAe,SAAS,eAAe,kBAAkB,EAE3DH,GAAcC,GAChBD,EAAW,iBAAiB,QAAS,IAAM,CACzCX,EAAeW,EAAYC,CAAU,CAC3C,CAAK,EAGCC,GAAmBC,GACrBD,EAAgB,iBAAiB,QAAS,IAAM,CAC9Cb,EAAea,EAAiBC,CAAY,CAClD,CAAK,EAGHe,EAAY,QAAQP,GAAQ,CAC1BA,EAAK,iBAAiB,QAAS,IAAM,CACnC,MAAMP,EAAc,SAAS,eAAe,iBAAiB,EACzDA,GACFf,EAAe,KAAMe,CAAW,CAExC,CAAK,CACL,CAAG,EAGD,MAAMoB,EAAa,SAAS,eAAe,sBAAsB,EAC7DA,GACFA,EAAW,iBAAiB,SAAUC,GAAK,CACzCA,EAAE,eAAc,EAEhB,MAAMP,EAAc,SAAS,iBAAiB,qBAAqB,EAC/C,SAAS,eAAe,uBAAuB,EACnE,MAAMlB,EAAa,SAAS,eAAe,uBAAuB,EAC5DE,EAAkB,SAAS,eAC/B,yBACR,EACYD,EAAa,SAAS,eAAe,gBAAgB,EACrDE,EAAe,SAAS,eAAe,kBAAkB,EACzDC,EAAc,SAAS,eAAe,iBAAiB,EAE7D,IAAIe,EAAiB,EACjBO,EAAY,GAGhBR,EAAY,QAAQ,CAACP,EAAMS,IAAU,CAC/BT,EAAK,UAAU,SAAS,4BAA4B,IACtDQ,EAAiB,KAAK,IAAIA,EAAgBC,EAAQ,CAAC,EAE7D,CAAO,EAGGD,IAAmB,GACrBlC,EAAe,KAAMmB,EAAa,wBAAwB,EAC1DsB,EAAY,IAEZrC,EAAe,KAAMe,CAAW,EAIlC,MAAMb,GAAQS,GAAA,YAAAA,EAAY,MAAM,SAAU,GACpC2B,GAASzB,GAAA,YAAAA,EAAiB,MAAM,SAAU,GAE3CX,EAGOD,EAAcC,CAAK,EAQ7BF,EAAeW,EAAYC,CAAU,GAPrChB,EACEe,EACAC,EACA,oCACV,EACQyB,EAAY,KARZzC,EAAee,EAAYC,EAAY,yBAAyB,EAChEyB,EAAY,IAaTC,EAQHtC,EAAea,EAAiBC,CAAY,GAP5ClB,EACEiB,EACAC,EACA,2BACV,EACQuB,EAAY,IAMV,CAAAA,GAKAlC,IACFI,IAEA,MACE,kDAAkDJ,CAA0B,UAC5E,CACE,OAAQ,QACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CACnB,KAAM2B,EACN,MAAA5B,EACA,OAAAoC,CACd,CAAa,CACF,CACF,EACE,KAAK,MAAMC,GAAY,CACtB,MAAMC,EAAO,MAAMD,EAAS,OAE5B,GAAI,CAACA,EAAS,GACZ,KAAM,CAAE,QAASC,EAAK,QAAS,KAAAA,CAAI,EAGrC,OAAOA,CACnB,CAAW,EACA,KAAKA,GAAQ,CACZhC,IACA,MAAMiC,EAAeD,EAAK,MAAQ,eAClCpD,EACE,uCAAuCqD,CAAY,sBACnD,SACd,CACA,CAAW,EACA,MAAMC,GAAS,CACd,MAAMC,EACJD,EAAM,SAAW,6CACnBtC,GAAkBuC,EAAc,OAAO,CACnD,CAAW,EAEX,CAAK,CAEL,CCvVA,MAAMC,EAAgB,YAGf,SAASC,GAAe,CAC7B,GAAI,CACF,MAAMC,EAAY,aAAa,QAAQF,CAAa,EACpD,OAAOE,EAAY,KAAK,MAAMA,CAAS,EAAI,CAAA,CAC5C,MAAe,CACd,MAAO,EACR,CACH,CAGO,SAASC,GAAe9B,EAAY,CACzC,GAAI,CACF,MAAM6B,EAAYD,IAClB,OAAKC,EAAU,SAAS7B,CAAU,EAK3B,IAJL6B,EAAU,KAAK7B,CAAU,EACzB,aAAa,QAAQ2B,EAAe,KAAK,UAAUE,CAAS,CAAC,EACtD,GAGV,MAAe,CACd,MAAO,EACR,CACH,CAEO,SAASE,GAAoB/B,EAAY,CAC9C,GAAI,CAEF,MAAMgC,EADYJ,IACkB,OAAOK,GAAMA,IAAOjC,CAAU,EAClE,oBAAa,QAAQ2B,EAAe,KAAK,UAAUK,CAAiB,CAAC,EAC9D,EACR,MAAe,CACd,MAAO,EACR,CACH,CAEO,SAASE,GAAWlC,EAAY,CAErC,OADkB4B,IACD,SAAS5B,CAAU,CACtC,CAGO,SAASmC,GAAenC,EAAY,CACzC,OAAIkC,GAAWlC,CAAU,GACvB+B,GAAoB/B,CAAU,EACvB,KAEP8B,GAAe9B,CAAU,EAClB,GAEX,CClDA,IAAIoC,EAAc,OAEdC,EAAa,KACbC,EAAe,KACfC,EAAc,KACdC,EAAU,KAGP,SAASC,EAAWC,EAAM,CAC/B,GAAIN,IAAgBM,EAAM,OAE1BN,EAAcM,EAGG,SAAS,iBAAiB,mBAAmB,EACrD,QAAQC,GAAQ,CACNA,EAAK,aAAa,WAAW,IAC7BD,EACfC,EAAK,UAAU,IAAI,0BAA0B,EAE7CA,EAAK,UAAU,OAAO,0BAA0B,CAEtD,CAAG,EAGsB,SAAS,iBAAiB,wBAAwB,EAC1D,QAAQA,GAAQ,CACZA,EAAK,aAAa,WAAW,IAC7BD,EACfC,EAAK,UAAU,IAAI,+BAA+B,EAElDA,EAAK,UAAU,OAAO,+BAA+B,CAE3D,CAAG,EAGGD,IAAS,OACXE,KACSF,IAAS,aAClBG,IAEJ,CAGA,SAASC,IAAiB,CACpBT,IACFA,EAAW,UAAU,IAAI,SAAS,EAClCC,EAAa,UAAU,IAAI,WAAW,EACtCE,EAAQ,UAAU,IAAI,QAAQ,EAC9B,SAAS,KAAK,MAAM,SAAW,SAEnC,CAEA,SAASO,GAAkB,CACrBV,IACFA,EAAW,UAAU,OAAO,SAAS,EACrCC,EAAa,UAAU,OAAO,WAAW,EACzCE,EAAQ,UAAU,OAAO,QAAQ,EACjC,SAAS,KAAK,MAAM,SAAW,GAEnC,CAGO,SAASQ,IAAa,CACV,SAAS,iBAAiB,mBAAmB,EAErD,QAAQL,GAAQ,CACvBA,EAAK,iBAAiB,QAASxB,GAAK,CAClCA,EAAE,eAAc,EAChB,MAAMuB,EAAOC,EAAK,aAAa,WAAW,EACtCD,GACFD,EAAWC,CAAI,CAEvB,CAAK,CACL,CAAG,EAEDL,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAc,SAAS,cAAc,qBAAqB,EAC1DC,EAAU,SAAS,eAAe,SAAS,EAGvCF,GACFA,EAAa,iBAAiB,QAASQ,EAAc,EAInDP,GACFA,EAAY,iBAAiB,QAASQ,CAAe,EAIhC,SAAS,iBAAiB,wBAAwB,EAC1D,QAAQJ,GAAQ,CAC7BA,EAAK,iBAAiB,QAASxB,GAAK,CAClCA,EAAE,eAAc,EAChB,MAAMuB,EAAOC,EAAK,aAAa,WAAW,EACtCD,IACFD,EAAWC,CAAI,EACfK,IAER,CAAK,CACL,CAAG,EAGGV,GACFA,EAAW,iBAAiB,QAASlB,GAAK,CACpCA,EAAE,SAAWkB,GACfU,GAER,CAAK,CAEL,CAEO,SAASE,IAAiB,CAC/B,OAAOb,CACT,CCjHA,IAAIlD,GAA6B,KAGjC,SAASgE,GAAqB,CAC5B,MAAMjD,EAAQ,SAAS,eAAe,mBAAmB,EACpDA,IAELA,EAAM,UAAU,OAAO,sBAAsB,EAC7CA,EAAM,UAAU,OAAO,wBAAwB,EAE/C,SAAS,KAAK,MAAM,SAAW,GACjC,CAEO,SAASkD,GAAkBnD,EAAY,CAC5C,MAAMC,EAAQ,SAAS,eAAe,mBAAmB,EACzD,GAAI,CAACA,EAAO,OAEZf,GAA6Bc,EAE7BC,EAAM,UAAU,IAAI,sBAAsB,EAC1CA,EAAM,UAAU,OAAO,wBAAwB,EAC/C,SAAS,KAAK,MAAM,SAAW,SAG/B,MAAMmD,EAAQ,SAAS,eAAe,yBAAyB,EACzDC,EAAQ,SAAS,eAAe,yBAAyB,EACzDlD,EAAc,SAAS,cAAc,+BAA+B,EACpES,EAAc,SAAS,cAAc,+BAA+B,EACpE0C,EAAS,SAAS,eAAe,0BAA0B,EAC3DC,EAAW,SAAS,eAAe,6BAA6B,EAChEC,EAAY,SAAS,eAAe,6BAA6B,EACjEC,EAAU,SAAS,eAAe,2BAA2B,EAC7DC,EAAW,SAAS,eAAe,4BAA4B,EAC/DC,EAAO,SAAS,eAAe,wBAAwB,EACvDC,EAAc,SAAS,eAAe,+BAA+B,EAEvEP,IAAOA,EAAM,YAAc,cAC3BlD,IAAaA,EAAY,YAAc,OACvCmD,IAAQA,EAAO,YAAc,IAC7BC,IAAUA,EAAS,YAAc,IACjCC,IAAWA,EAAU,YAAc,IACnCC,IAASA,EAAQ,YAAc,KAC/BC,IAAUA,EAAS,YAAc,KACjCC,IAAMA,EAAK,YAAc,UACzBC,IAAaA,EAAY,YAAc,IACvCR,IAAOA,EAAM,IAAM,IAGvB,MAAM,kDAAkDpD,CAAU,EAAE,EACjE,KAAKsB,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,kCAAkC,EAEpD,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKuC,GAAY,CAkBhB,GAhBIT,IAAOA,EAAM,IAAMS,EAAS,QAAU,IACtCR,IAAOA,EAAM,YAAcQ,EAAS,MAAQ,IAC5CP,IAAQA,EAAO,YAAcO,EAAS,QAAU,IAChDN,IAAUA,EAAS,YAAcM,EAAS,UAAY,IACtDL,IAAWA,EAAU,YAAcK,EAAS,WAAa,IACzDJ,IAASA,EAAQ,YAAcI,EAAS,YAAc,GACtDH,IAAUA,EAAS,YAAcG,EAAS,gBAAkB,GAC5DF,IAAMA,EAAK,YAAc,IAAIE,EAAS,MAAQ,CAAC,QAC/CD,IAAaA,EAAY,YAAcC,EAAS,aAAe,IAG/D1D,IACFA,EAAY,aAAe0D,EAAS,QAAU,GAAG,QAAQ,CAAC,GAIxDjD,EAAa,CACf,MAAMR,EAAQQ,EAAY,iBACxB,8BACV,EACckD,EAAS,KAAK,MAAMD,EAAS,QAAU,CAAC,EAE9CzD,EAAM,QAAQ,CAACC,EAAMS,IAAU,CAC7B,MAAMP,EAAOF,EAAK,cAAc,MAAM,EAClCS,EAAQgD,GACVvD,EAAK,aAAa,OAAQ,SAAS,EACnCA,EAAK,gBAAgB,QAAQ,EAC7BA,EAAK,gBAAgB,cAAc,IAEnCA,EAAK,aAAa,OAAQ,MAAM,EAChCA,EAAK,aAAa,SAAU,uBAAuB,EACnDA,EAAK,aAAa,eAAgB,KAAK,EAEnD,CAAS,CACF,CAEDwD,GAAqB/D,CAAU,EAG/B,MAAMgE,EAAY,SAAS,eAAe,8BAA8B,EACxE,GAAIA,EAAW,CACb,MAAMC,EAAeD,EAAU,UAAU,EAAI,EAC7CA,EAAU,WAAW,aAAaC,EAAcD,CAAS,EAEzDC,EAAa,iBAAiB,QAAS,IAAM,CAC3C,MAAMxE,EAAgB,SAAS,eAAe,mBAAmB,EACjEA,GAAA,MAAAA,EAAe,UAAU,IAAI,0BAE7BM,GAAgBC,CAAU,CACpC,CAAS,CACF,CACP,CAAK,EACA,MAAMyB,GAAS,CAEV4B,IAAOA,EAAM,YAAc,0BAC3BO,IACFA,EAAY,YACV,2DACV,CAAK,CACL,CAGA,SAASG,GAAqB/D,EAAY,CACxC,MAAMkE,EAAc,SAAS,eAAe,6BAA6B,EACzE,GAAI,CAACA,EAAa,OAElB,MAAMC,EAAgBjC,GAAWlC,CAAU,EACrCoE,EAAUF,EAAY,cAAc,MAAM,EAC1CG,EAAUH,EAAY,cAAc,UAAU,EAEhDC,GACFD,EAAY,UAAU,IAAI,QAAQ,EAC9BE,IAASA,EAAQ,YAAc,eAC/BC,IACFA,EAAQ,aAAa,OAAQ,cAAc,EAC3CA,EAAQ,gBAAgB,QAAQ,EAChCA,EAAQ,gBAAgB,cAAc,KAGxCH,EAAY,UAAU,OAAO,QAAQ,EACjCE,IAASA,EAAQ,YAAc,oBAC/BC,IACFA,EAAQ,aAAa,OAAQ,MAAM,EACnCA,EAAQ,aAAa,SAAU,cAAc,EAC7CA,EAAQ,aAAa,eAAgB,GAAG,GAG9C,CAIO,SAASC,IAAoB,CAClC,MAAMC,EAAgB,SAAS,eAAe,yBAAyB,EACjEtE,EAAQ,SAAS,eAAe,mBAAmB,EACnDuE,EAAevE,GAAA,YAAAA,EAAO,cAAc,4BAGtCsE,GACFA,EAAc,iBAAiB,QAASrB,CAAkB,EAGxDsB,GACFA,EAAa,iBAAiB,QAAStB,CAAkB,EAI3D,MAAMgB,EAAc,SAAS,eAAe,6BAA6B,EACrEA,GACFA,EAAY,iBAAiB,QAAS,IAAM,CAC1C,MAAMlE,EAAad,GACnB,GAAI,CAACc,EAAY,OAEjB,MAAMyE,EAAWtC,GAAenC,CAAU,EAC1C+D,GAAqB/D,CAAU,EAE3B,CAACyE,GAAYxB,GAAgB,IAAK,cACpCC,IACAwB,IAER,CAAK,CAEL,CCnLA,IAAIC,EAAgB,UAChBvC,EAAc,EACdwC,EAAkB,KAClBC,EAAuB,GACvBC,EAAc,OAGlB,SAASC,IAAqB,CAG5B,OAFc,OAAO,YAER,IAAY,EAClB,EACT,CAEA,SAASC,IAAoB,CAG3B,OAFc,OAAO,YAER,IAAY,EAClB,EACT,CAGA,SAASC,GAAqBC,EAAaC,EAAKC,EAAY,GAAI,CAC9D,GAAI,CAACF,EAAa,MAAO,GAEzB,MAAMG,EAAY,wBAEZC,EAAK,GAAGD,CAAS,GAAGH,CAAW,0BAE/BK,EAAK,GAAGF,CAAS,GAAGH,CAAW,0BAE/BM,EAAK,GAAGH,CAAS,GAAGH,CAAW,0BAErC,MAAO;AAAA;AAAA,eAEME,CAAS;AAAA,aACXG,CAAE;AAAA,gBACCD,CAAE,UAAUC,CAAE,UAAUC,CAAE;AAAA;AAAA,aAE7BL,CAAG;AAAA;AAAA;AAAA;AAAA,GAKhB,CAGA,SAASM,IAAkB,CACzB,MAAMC,EAAc,SAAS,eAAe,qBAAqB,EAC7DA,IACFA,EAAY,MAAM,QAAU,OAEhC,CAEA,SAASC,IAAkB,CACzB,MAAMD,EAAc,SAAS,eAAe,qBAAqB,EAC3DE,EAAc,SAAS,eAAe,2BAA2B,EACnEF,IACFA,EAAY,MAAM,QAAU,QAE1BE,IACFA,EAAY,MAAQ,IAEtBf,EAAuB,EACzB,CAGO,SAASgB,IAAyB,CACvC,MAAMC,EAAiB,SAAS,cAC9B,kCACJ,EAEOA,GAELA,EAAe,iBAAiB,QAASC,GAAS,CAChD,MAAMC,EAAWD,EAAM,OAAO,QAC5B,iDACN,EAEI,GAAIC,EAAU,CACZ,MAAMC,EAAeD,EAAS,QAC5B,iDACR,EAEM,GAAI,CAACC,EAAc,OAEnB,MAAMjG,EAAaiG,EAAa,QAAQ,WACxC,GAAI,CAACjG,EAAY,OAEjBmD,GAAkBnD,CAAU,EAC5B,MACD,CAED,MAAMkG,EAAeH,EAAM,OAAO,QAChC,uCACN,EAII,GAFI,CAACG,GAGHA,EAAa,UAAU,SACrB,gDACD,EAED,OAGF,MAAMC,EAAeD,EAAa,QAAQ,aACrCC,GAELC,EAAwBD,CAAY,CACxC,CAAG,CACH,CAEO,SAASE,IAAe,CAC7B,MAAMC,EAAoB,SAAS,cAAc,iBAAiB,EAC7DA,GAELA,EAAkB,iBAAiB,QAASP,GAAS,CACnD,MAAMQ,EAAYR,EAAM,OAAO,QAAQ,QAAQ,EAC/C,GAAI,CAACQ,EAAW,OAEhB,MAAMC,EACJD,EAAU,aAAa,cAAc,GACrCA,EAAU,YAAY,QAAQ,IAAK,EAAE,EAAE,OAEzC,GAAIzB,IAAgB,OAAQ,CAC1B,MAAM2B,EAAW,SAAS,cACxB,qCACR,EACUA,EACFA,EAAS,MAAK,EAEd7D,IAEH,CAED,MAAMgD,EAAc,SAAS,eAAe,2BAA2B,EAEnEA,IACFA,EAAY,MAAQY,GAGtB,MAAME,EAAmB,SAAS,cAAc,qBAAqB,EACjEA,GACFA,EAAiB,eAAe,CAAE,SAAU,QAAU,CAAA,EAGpD9B,EACFwB,EAAwBxB,EAAiB,EAAG4B,CAAO,EAEnDrI,EACE,2DACA,OACR,CAEA,CAAG,CACH,CAGA,SAASwI,GAAmB9C,EAAU,CACpC,MAAO;AAAA,4EACmEA,EAAS,IAAI;AAAA;AAAA,UAE/EoB,GAAqBpB,EAAS,OAAQ,GAAGA,EAAS,IAAI,WAAW,CAAC;AAAA;AAAA,2EAEDA,EAAS,IAAI;AAAA,+EACTA,EAAS,MAAM;AAAA;AAAA;AAAA;AAAA,GAK9F,CAEA,SAAS+C,GAAuB/C,EAAU,CACxC,MAAMC,EAASD,EAAS,QAAU,EAC5BgD,EAAiBhD,EAAS,gBAAkB,EAC5CF,EAAOE,EAAS,MAAQ,EACxBN,EAAWM,EAAS,UAAY,GAChCP,EAASO,EAAS,QAAU,GAGlC,MAAO;AAAA,wHAFYA,EAAS,KAAO,EAG6F;AAAA;AAAA;AAAA;AAAA;AAAA,8EAKpDC,EAAO,QACvE,CACd,CAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iEAsBHD,EAAS,IACV;AAAA;AAAA;AAAA;AAAA;AAAA,0EAKiEgD,CAAc;AAAA,4EACZlD,CAAI;AAAA;AAAA;AAAA;AAAA,0EAINJ,CAAQ;AAAA;AAAA;AAAA;AAAA,0EAIRD,CAAM;AAAA;AAAA;AAAA;AAAA,GAKhF,CAGA,SAASwD,GAAoBC,EAAW,CACtC,MAAMjB,EAAiB,SAAS,cAC9B,kCACJ,EAEOA,IAILA,EAAe,UAAU,OAAO,4CAA4C,EAE5EA,EAAe,UAAY,GAE3BiB,EAAU,QAAQlD,GAAY,CAC5B,MAAMmD,EAAWL,GAAmB9C,CAAQ,EAC5CiC,EAAe,mBAAmB,YAAakB,CAAQ,CAC3D,CAAG,EACH,CAEA,SAASC,GAAwBF,EAAW,CAC1C,MAAMjB,EAAiB,SAAS,cAC9B,kCACJ,EAEOA,IAILA,EAAe,UAAU,IAAI,4CAA4C,EAEzEA,EAAe,UAAY,GAE3BiB,EAAU,QAAQlD,GAAY,CAC5B,MAAMmD,EAAWJ,GAAuB/C,CAAQ,EAChDiC,EAAe,mBAAmB,YAAakB,CAAQ,CAC3D,CAAG,EACH,CAEA,SAASE,IAAmB,CAC1B,MAAMpB,EAAiB,SAAS,cAC9B,kCACJ,EAEE,GAAI,CAACA,EACH,OAGFA,EAAe,UAAU,IAAI,4CAA4C,EAEzEA,EAAe,UAAY,GAU3BA,EAAe,mBAAmB,YARX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAQsC,CAC/D,CAGO,SAASqB,EAAkBhB,EAAe,KAAM,CACrD,MAAMiB,EAAuB,SAAS,eACpC,0BACJ,EAEE,GAAI,CAACA,EACH,OAKF,GAFAA,EAAqB,UAAY,GAE7BtC,IAAgB,YAAa,CAC/B,MAAMuC,EAAiB,SAAS,cAAc,QAAQ,EACtDA,EAAe,UACb,kGACFA,EAAe,YAAc,YAC7BA,EAAe,aAAa,kBAAmB,WAAW,EAC1DD,EAAqB,YAAYC,CAAc,EAC/C,MACD,CAED,MAAMC,EAAe,SAAS,cAAc,QAAQ,EAmBpD,GAlBAA,EAAa,UAAY,8CACzBA,EAAa,YAAc,YAC3BA,EAAa,aAAa,kBAAmB,WAAW,EAEnDnB,GACHmB,EAAa,UAAU,IACrB,qDACN,EAGEA,EAAa,iBAAiB,QAAS,IAAM,CAC3C1C,EAAkB,KAClBxC,EAAc,EACdmF,EAAkB5C,EAAevC,CAAW,CAChD,CAAG,EAEDgF,EAAqB,YAAYE,CAAY,EAEzCnB,EAAc,CAChB,MAAMqB,EAAY,SAAS,cAAc,MAAM,EAC/CA,EAAU,UAAY,mDACtBA,EAAU,YAAc,IACxBJ,EAAqB,YAAYI,CAAS,EAE1C,MAAMC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,UACV,kGACFA,EAAY,YAActB,EAC1BiB,EAAqB,YAAYK,CAAW,CAC7C,CACH,CAGA,SAASC,EAAiBC,EAAYjF,EAAO,EAAG,CAC9C,MAAMkF,EAAsB,SAAS,cACnC,iCACJ,EAQE,GANI,CAACA,IAILA,EAAoB,UAAY,GAE5BD,GAAc,GAChB,OAGF,MAAME,EAAWC,GAAc,CAC7B1F,EAAc0F,EACVhD,IAAgB,YAClBJ,EAAuBoD,CAAU,EACxBlD,EACTwB,EACExB,EACAkD,EACAjD,CACR,EAEM0C,EAAkB5C,EAAemD,CAAU,CAEjD,EAEQC,EAAc,CAACC,EAAMC,EAAYC,IAAY,CACjD,MAAMC,EAAM,SAAS,cAAc,QAAQ,EAC3C,OAAAA,EAAI,UAAY,uCAChBA,EAAI,UAAYH,EAChBG,EAAI,SAAWF,EACfE,EAAI,iBAAiB,QAASD,CAAO,EAC9BC,CACX,EAEQC,EAAgBC,GAAO,CAC3B,MAAMF,EAAM,SAAS,cAAc,QAAQ,EAC3C,OAAAA,EAAI,UAAY,sCAChBA,EAAI,YAAcE,EACdA,IAAQ3F,GACVyF,EAAI,UAAU,IAAI,6CAA6C,EACjEA,EAAI,iBAAiB,QAAS,IAAMN,EAASQ,CAAG,CAAC,EAC1CF,CACX,EAEQG,EAAiB,IAAM,CAC3B,MAAMC,EAAO,SAAS,cAAc,MAAM,EAC1C,OAAAA,EAAK,UAAY,0CACjBA,EAAK,YAAc,MACZA,CACX,EAEEX,EAAoB,YAClBG,EAAY,UAAWrF,IAAS,EAAG,IAAMmF,EAAS,CAAC,CAAC,CACxD,EACED,EAAoB,YAClBG,EAAY,WAAYrF,IAAS,EAAG,IAAMmF,EAASnF,EAAO,CAAC,CAAC,CAChE,EAEE,MAAM8F,EAAQ,CAAA,EAGd,GAFAA,EAAM,KAAK,CAAC,EAERb,GAAc,EAChB,QAAS,EAAI,EAAG,GAAKA,EAAY,IAC/Ba,EAAM,KAAK,CAAC,MAET,CACL,IAAIC,EAAY/F,EAAO,EACnBgG,EAAahG,EAAO,EAEpBA,EAAO,IACT+F,EAAY,EACZC,EAAa,GAGXhG,EAAOiF,EAAa,IACtBc,EAAYd,EAAa,EACzBe,EAAaf,EAAa,GAGxBc,EAAY,GACdD,EAAM,KAAK,KAAK,EAGlB,QAASxH,EAAIyH,EAAWzH,GAAK0H,EAAY1H,IACnCA,EAAI,GAAKA,EAAI2G,GACfa,EAAM,KAAKxH,CAAC,EAIZ0H,EAAaf,EAAa,GAC5Ba,EAAM,KAAK,KAAK,EAGdb,EAAa,GACfa,EAAM,KAAKb,CAAU,CAExB,CAEDa,EAAM,QAAQG,GAAQ,CAChBA,IAAS,MACXf,EAAoB,YAAYU,EAAc,CAAE,EAEhDV,EAAoB,YAAYQ,EAAcO,CAAI,CAAC,CAEzD,CAAG,EAEDf,EAAoB,YAClBG,EAAY,WAAYrF,IAASiF,EAAY,IAAME,EAASnF,EAAO,CAAC,CAAC,CACzE,EACEkF,EAAoB,YAClBG,EAAY,UAAWrF,IAASiF,EAAY,IAAME,EAASF,CAAU,CAAC,CAC1E,CACA,CAGO,SAASJ,EAAkBqB,EAAQlG,EAAO,EAAG,CAClDiC,EAAgBiE,EAChBxG,EAAcM,EAEdiD,KACA,MAAMkD,EAAgB,mBAAmBD,CAAM,EACzCE,EAAQ/D,KACRgE,EAAM,uDAAuDF,CAAa,SAASnG,CAAI,UAAUoG,CAAK,GAE5G,MAAMC,CAAG,EACN,KAAKzH,GAAYA,EAAS,MAAM,EAChC,KAAKC,GAAQ,CACZ,MAAMwF,EAAYxF,EAAK,SAAWA,EAAK,WAAaA,GAAQ,GAEtDoG,EACJpG,EAAK,YAAcA,EAAK,aAAeA,EAAK,WAAa,EAEvD,MAAM,QAAQwF,CAAS,GAAKA,EAAU,OAAS,GACjDnC,EAAkB,KAClBuC,EAAkB,IAAI,EACtBL,GAAoBC,CAAS,EAC7BW,EAAiBC,EAAYjF,CAAI,IAEjCyE,EAAkB,IAAI,EACtBO,EAAiB,EAAG,CAAC,EAE7B,CAAK,CACL,CAEO,SAAStB,EACdD,EACAzD,EAAO,EACP8D,EAAU3B,EACV,CACAD,EAAkBuB,EAClB/D,EAAcM,EACdmC,EAAuB2B,EAEvBf,KACA,MAAMqD,EAAQ9D,KAEd,IAAIgE,EAAY,GACZrE,IAAkB,UACpBqE,EAAY,UACHrE,IAAkB,aAC3BqE,EAAY,WACHrE,IAAkB,cAC3BqE,EAAY,aAGd,MAAMC,EAAkB,mBAAmB9C,CAAY,EACvD,IAAI4C,EAAM,kDAAkDC,CAAS,IAAIC,CAAe,SAASvG,CAAI,UAAUoG,CAAK,GAEpH,GAAItC,GAAWA,EAAQ,KAAI,IAAO,GAAI,CACpC,MAAM0C,EAAiB,mBAAmB1C,EAAQ,KAAM,CAAA,EACxDuC,GAAO,YAAYG,CAAc,EAClC,CAED,MAAMH,CAAG,EACN,KAAKzH,GAAY,CAChB,GAAIA,EAAS,SAAW,IAAK,MAAO,CAAE,QAAS,CAAE,EAAE,WAAY,GAC/D,GAAI,CAACA,EAAS,GAAI,MAAM,IAAI,MAAM,eAAe,EACjD,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CACZ,MAAMwF,EAAYxF,EAAK,SAAW,GAE5BoG,EAAapG,EAAK,YAAc,EAItC,GAFA4F,EAAkBhB,CAAY,EAE1B,MAAM,QAAQY,CAAS,GAAKA,EAAU,OAAS,EACjDE,GAAwBF,CAAS,EACjCW,EAAiBC,EAAYjF,CAAI,MAC5B,CACLwE,KACA,MAAMU,EAAsB,SAAS,cACnC,iCACV,EACYA,IACFA,EAAoB,UAAY,GAEnC,CACP,CAAK,CACL,CAEO,SAASuB,IAAa,CAC3B,MAAMC,EAAkB,SAAS,eAAe,qBAAqB,EAC/DxD,EAAc,SAAS,eAAe,2BAA2B,EAEvE,GAAI,CAACwD,GAAmB,CAACxD,EAAa,OAEtC,MAAMyD,EAAqB,IAAM,CAC/B,MAAM7C,EAAUZ,EAAY,MAAM,KAAM,EAAC,YAAW,EAEhDhB,EACFwB,EAAwBxB,EAAiB,EAAG4B,CAAO,EAEnDrI,EAAuB,iCAAkC,OAAO,CAEtE,EAEEyH,EAAY,iBAAiB,QAASG,GAAS,CAChCA,EAAM,OAAO,MAAM,KAAI,IAEvB,IAAMnB,GACjBwB,EAAwBxB,EAAiB,EAAG,EAAE,CAEpD,CAAG,EAEDgB,EAAY,iBAAiB,UAAWG,GAAS,CAC3CA,EAAM,MAAQ,UAChBA,EAAM,eAAc,EACpBsD,IAEN,CAAG,EAED,MAAMC,EAAaF,EAAgB,cACjC,yCACJ,EACME,GACFA,EAAW,iBAAiB,QAASD,CAAkB,CAE3D,CAEA,SAASE,GAA4B,CACnC,MAAMzD,EAAiB,SAAS,cAC9B,kCACJ,EAEE,GAAI,CAACA,EACH,OAGFA,EAAe,UAAU,IAAI,4CAA4C,EAEzEA,EAAe,UAAY,GAY3BA,EAAe,mBAAmB,YAVX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAUsC,CAC/D,CAEO,SAASpB,EAAuBhC,EAAO,EAAG,CAC/CN,EAAcM,EAEd,MAAM8G,EAAc5H,IACdkH,EAAQ9D,KAId,GAFAmC,EAAkB,IAAI,EAElBqC,EAAY,SAAW,EAAG,CAC5BD,IACA,MAAM3B,EAAsB,SAAS,cACnC,iCACN,EACQA,IAAqBA,EAAoB,UAAY,IACzD,MACD,CAED,MAAMD,EAAa,KAAK,KAAK6B,EAAY,OAASV,CAAK,EAEnDpG,EAAOiF,IACTjF,EAAOiF,EACPvF,EAAcM,GAGhB,MAAM+G,GAAc/G,EAAO,GAAKoG,EAC1BY,EAAWD,EAAaX,EAGxBa,EAFYH,EAAY,MAAMC,EAAYC,CAAQ,EAE7B,IAAIzH,GAC7B,MAAM,kDAAkDA,CAAE,EAAE,EACzD,KAAKX,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,0BAA0B,EAE5C,OAAOA,EAAS,MACxB,CAAO,EACA,MAAMG,GACE,IACR,CACP,EAEE,QAAQ,IAAIkI,CAAQ,EAAE,KAAK5C,GAAa,CACtC,MAAM6C,EAAiB7C,EAAU,OAAO8C,GAAMA,IAAO,IAAI,EAErDD,EAAe,OAAS,GAC1B3C,GAAwB2C,CAAc,EACtClC,EAAiBC,EAAYjF,CAAI,GAEjC6G,GAEN,CAAG,CACH,CAGO,SAAS3G,IAAe,CAC7BkC,EAAc,OACdF,EAAkB,KAClBC,EAAuB,GAGvB,MAAMiF,EAAmB,SAAS,cAChC,qCACJ,EACMA,IACFA,EAAiB,MAAM,QAAU,QAInC,MAAMC,EAAmB,SAAS,cAAc,qBAAqB,EACjEA,GACFA,EAAiB,UAAU,OAAO,+BAA+B,EAInExC,EAAkB5C,EAAe,CAAC,CACpC,CAEO,SAAS9B,IAAoB,CAClCiC,EAAc,YACdF,EAAkB,KAClBC,EAAuB,GAEvB,MAAMiF,EAAmB,SAAS,cAChC,qCACJ,EACMA,IACFA,EAAiB,MAAM,QAAU,QAGnCnE,KAEA,MAAMoE,EAAmB,SAAS,cAAc,qBAAqB,EACjEA,GACFA,EAAiB,UAAU,IAAI,+BAA+B,EAGhErF,GACF,CAGA,IAAIsF,GAEJ,OAAO,iBAAiB,SAAU,IAAM,CACtC,aAAaA,EAAa,EAE1BA,GAAgB,WAAW,IAAM,CAC/B5H,EAAc,EAEV0C,IAAgB,YAClBJ,EAAuB,CAAC,EACfE,EACTwB,EAAwBxB,EAAiB,EAAGC,CAAoB,EAEhE0C,EAAkB5C,EAAe,CAAC,CAErC,EAAE,GAAG,CACR,CAAC,ECruBM,SAASsF,IAAyB,CACvC,MAAM/J,EAAO,SAAS,eAAe,eAAe,EAC9CR,EAAa,SAAS,eAAe,gBAAgB,EACrDb,EAAe,SAAS,eAAe,qBAAqB,EAE9D,CAACqB,GAAQ,CAACR,GAAc,CAACb,IAE3Ba,EAAW,iBAAiB,QAAS,IAAM,EACvCV,EAAcU,EAAW,KAAK,GAAKA,EAAW,MAAM,KAAM,IAAK,KACjEX,EAAeW,EAAYb,CAAY,CAE7C,CAAG,EAEDqB,EAAK,iBAAiB,SAAU,MAAOiB,GAAM,CAC3CA,EAAE,eAAc,EAChB,MAAMlC,EAAQS,EAAW,MAAM,KAAI,EAEnC,GAAI,CAACT,EAAO,CACVN,EAAee,EAAYb,EAAc,iCAAiC,EAC1E,MACD,CAED,GAAI,CAACG,EAAcC,CAAK,EAAG,CACzBN,EAAee,EAAYb,EAAc,0DAA0D,EACnG,MACD,CAEDE,EAAeW,EAAYb,CAAY,EAEvC,GAAI,CACF,MAAMyC,EAAW,MAAM,MAAM,oDAAqD,CAChF,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CAAE,MAAArC,CAAK,CAAE,CACtC,CAAO,EAED,GAAIqC,EAAS,GAAI,CACf,MAAMC,EAAO,MAAMD,EAAS,OAC5BnD,EAAuBoD,EAAK,QAAS,SAAS,EAC9CrB,EAAK,MAAK,CACX,SACQoB,EAAS,SAAW,IAC3BnD,EAAuB,qDAAsD,SAAS,EACtF+B,EAAK,MAAK,MAGV,OAAM,IAAI,MAAM,qBAAqB,CAGxC,OAAQuB,EAAO,CACdtD,EAAuB,gDAAiD,OAAO,EAC/E,QAAQ,MAAMsD,CAAK,CACpB,CACL,CAAG,EACH,CC1DA,SAASyI,IAAe,CACtB,MAAMC,EAAQ,IAAI,KACZC,EAAOD,EAAM,cACbE,EAAQ,OAAOF,EAAM,SAAQ,EAAK,CAAC,EAAE,SAAS,EAAG,GAAG,EACpDG,EAAM,OAAOH,EAAM,QAAS,CAAA,EAAE,SAAS,EAAG,GAAG,EACnD,MAAO,GAAGC,CAAI,IAAIC,CAAK,IAAIC,CAAG,EAChC,CAGA,eAAeC,IAAoB,CACjC,MAAMC,EAAkB,aAAa,QAAQ,YAAY,EACnDC,EAAoB,aAAa,QAAQ,cAAc,EACvDC,EAAkB,aAAa,QAAQ,YAAY,EACnDC,EAAYT,KAElB,GAAIM,GAAmBC,GAAqBC,GACtCA,IAAoBC,EACtB,MAAO,CAAE,MAAOH,EAAiB,OAAQC,CAAiB,EAK9D,GAAI,CAEF,MAAMlJ,EAAO,MADI,MAAM,MAAM,4CAA4C,GAC7C,OAE5B,oBAAa,QAAQ,aAAcA,EAAK,KAAK,EAC7C,aAAa,QAAQ,eAAgBA,EAAK,MAAM,EAChD,aAAa,QAAQ,aAAcoJ,CAAS,EAErC,CAAE,MAAOpJ,EAAK,MAAO,OAAQA,EAAK,OAC1C,MAAe,CACd,OAAIiJ,GAAmBC,EACd,CAAE,MAAOD,EAAiB,OAAQC,CAAiB,EAGrD,IACR,CACH,CAGO,eAAeG,IAAe,CACnC,MAAMC,EAAY,MAAMN,KAExB,GAAI,CAACM,EACH,OAGF,MAAMC,EAAmB,SAAS,eAAe,yBAAyB,EACpEC,EAAqB,SAAS,eAClC,2BACJ,EAEMD,IACFA,EAAiB,YAAcD,EAAU,OAGvCE,IACFA,EAAmB,YAAcF,EAAU,OAE/C,CCpCAD,KAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDtG,KACA9D,KAEA/B,KAEAuE,KAEAmG,KAEAtD,KAEAQ,KAEA4D,KAEA1C,EAAkB,UAAW,CAAC,EAE9B,SAAS,iBAAiB,UAAWpG,GAAK,CACpCA,EAAE,MAAQ,WACZ+B,IACA3D,IAEN,CAAG,EAED,MAAMyL,EAAgB,SAAS,iBAC7B,0CACJ,EAEEA,EAAc,QAAQC,GAAU,CAC9BA,EAAO,iBAAiB,QAAS,IAAM,CACrCD,EAAc,QAAQ7C,GACpBA,EAAI,UAAU,OAAO,iDAAiD,CAC9E,EAEM8C,EAAO,UAAU,IAAI,iDAAiD,EAEtE,MAAMrC,EAASqC,EAAO,aAAa,aAAa,EAChD9D,EAAkB,IAAI,EAEtBI,EAAkBqB,EAAQ,CAAC,CACjC,CAAK,CACL,CAAG,CACH,CAAC"}